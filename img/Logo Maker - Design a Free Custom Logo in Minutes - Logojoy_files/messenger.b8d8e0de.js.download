(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1077:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapDispatchToProps=t.mapStateToProps=void 0;var n=r(42),o=p(r(1302)),a=r(184),s=r(133),l=p(r(729)),c=r(444),u=r(423),i=r(183),d=r(26);function p(e){return e&&e.__esModule?e:{default:e}}var f=function(e,t){var r=t.isCloseButtonEnabled,n=(0,u.currentConversationSelector)(e),o=(0,c.unreadConversationCountSelector)(e),a=(0,s.isBackButtonEnabledSelector)(e,t),i=(0,l.default)(e);return{unreadConversationCount:o,isCloseButtonEnabled:(0,d.isMobileBrowser)()||!i||r,isBackButtonEnabled:a,conversationId:n?n.id:null}};t.mapStateToProps=f;var m=function(t){return{onCloseClick:function(){t((0,a.closeMessenger)(!0))},onBackClick:function(){t((0,a.navigateBack)())},onDownloadTranscript:function(e){t((0,i.openConversationTranscript)(e))}}};t.mapDispatchToProps=m;var h=(0,n.connect)(f,m)(o.default);t.default=h},1093:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(22)),a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=r(43),s=o(r(14)),l=o(r(1336));function o(e){return e&&e.__esModule?e:{default:e}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(o){var e,t;function r(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=o.call.apply(o,[this].concat(r))||this),"handleNewConversationClick",function(){t.addNewConversationMetric(),t.props.onClick()}),u(c(t),"addNewConversationMetric",function(){t.context.addMetric("clicked","new_conversation","messenger",t.props.currentView,{},"m4_metric")}),u(c(t),"getClassName",function(){var e;return(0,s.default)(((e={"new-conversation-button":!0})["new-conversation-button__"+t.props.variant]=!0,e["new-conversation-button-light"]=t.context.isPrimaryColorLight(),e))}),t}return t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r.prototype.render=function(){return a.default.createElement("button",{className:this.getClassName(),onClick:this.handleNewConversationClick,tabIndex:"0"},a.default.createElement("div",{className:"new-conversation-button-contents"},a.default.createElement(l.default,null),a.default.createElement("span",null,(0,i.translate)("new_conversation"))))},r}(a.PureComponent);u(t.default=d,"defaultProps",{variant:"default"}),u(d,"contextTypes",{addMetric:n.default.func,isPrimaryColorLight:n.default.func})},1129:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(1))&&n.__esModule?n:{default:n};var a=function(){return o.default.createElement("svg",{className:"intercom-out-of-office-icon",viewBox:"0 0 8 10"},o.default.createElement("g",{fill:"#8B8B8B",className:"intercom-out-of-office-icon-fill"},o.default.createElement("polygon",{points:"4 0 4 0.9 6.2 0.9 4 3.9 4 4.7 7.6 4.7 7.6 3.8 5.3 3.8 7.5 0.8 7.5 0"}),o.default.createElement("path",{d:"M3 5.7L3 4.7 3 3.9 3 3.5 3.2 3.3 4 2.2C3.8 2.2 3.7 2.2 3.5 2.2 1.6 2.2 0 3.7 0 5.7 0 7.6 1.6 9.2 3.5 9.2 5.4 9.2 7 7.6 7 5.7L4 5.7 3 5.7Z"})))};t.default=a},1130:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(33),a=(n=r(443))&&n.__esModule?n:{default:n},i=r(59);var s=(0,o.createSelector)(a.default,function(e){return e.newConversation},function(e,t){var r=Date.now()-2592e5,n=(0,i.sortConversations)(e).filter(function(e){return e.lastPartCreatedAt>r});return t&&1===t.parts.length&&"saving"===t.parts[0].saveState&&n.unshift(t),{recentConversations:n}});t.default=s},1131:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(22)),a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=r(43),s=o(r(14)),l=o(r(1108));function o(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(o){var e,t;function r(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return c(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t=o.call.apply(o,[this].concat(r))||this),"getClassName",function(){var e;return(0,s.default)(((e={"new-message-button":!0})["new-message-button__"+t.props.variant]=!0,e["new-message-button-light"]=t.context.isPrimaryColorLight(),e))}),t}return t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r.prototype.render=function(){return a.default.createElement("button",{className:this.getClassName(),onClick:this.props.onClick,tabIndex:"0"},a.default.createElement(l.default,null),a.default.createElement("span",null,(0,i.translate)("new_message")))},r}(a.PureComponent);c(t.default=u,"defaultProps",{variant:"default"}),c(u,"contextTypes",{addMetric:n.default.func,isPrimaryColorLight:n.default.func})},1132:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=(n=r(14))&&n.__esModule?n:{default:n};var o=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var o=n.prototype;return o.getSeeAllClassnames=function(){return(0,i.default)({"intercom-anchor":!0,"intercom-see-all-link":!0,"intercom-see-all-link-padded":this.props.showMore})},o.render=function(){var e=this.props,t=e.linkText,r=e.onClick,n=e.showMore;return a.default.createElement("span",{className:"intercom-see-all"},n?a.default.createElement("span",{className:"intercom-see-all-more"}):null,a.default.createElement("span",{className:this.getSeeAllClassnames(),onClick:r,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&r(e)},role:"button",tabIndex:"0"},t))},n}(a.PureComponent);t.default=o},1133:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(22)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),c=s(r(856)),u=s(r(1099)),o=s(r(14)),a=r(43),i=r(724),d=s(r(1342)),p=s(r(719)),f=s(r(1058));function s(e){return e&&e.__esModule?e:{default:e}}var m=r(1062).relativeTimeInWords,h=function(s){var e,t;function r(){for(var r,e,t,n,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=s.call.apply(s,[this].concat(a))||this,e=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r),n=function(e){e.preventDefault();var t=r.props;(0,t.onClick)(t.conversation.id)},(t="handleClick")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,r}t=s,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){this.node&&0===this.props.rowIndex&&this.node.focus()},n.getClassNames=function(){return(0,o.default)({"intercom-conversation-summary":!0,"intercom-conversation-summary-unread":!this.props.conversation.read})},n.getSummaryContentTextClassNames=function(e){return(0,o.default)({"intercom-conversation-summary-content-text":!0,"intercom-conversation-summary-content-text-single-block":e})},n.getConversationParts=function(){return this.props.conversation.parts.filter(function(e){return!1===(0,p.default)(e.partType)})},n.getFirstConversationPart=function(){return this.props.conversation.parts[0]},n.getAuthorName=function(e){return e?e.firstName:this.getTeamName()},n.getTeamName=function(){var e=this.getFirstConversationPart();return"team"===e.author.type?e.author.firstName:this.props.appName},n.getTeamAdmins=function(){var e=this.getFirstConversationPart();return"team"===e.author.type?e.author.admins:this.props.appAdmins},n.shouldComponentUpdate=function(e,t){return(0,d.default)(this,e,t)},n.shouldRenderParticipants=function(){return 0<this.props.conversation.participants.length&&"en"===(0,a.getLocale)()},n.renderParticipantsAndAuthor=function(e){var t=this.props.conversation.participants.length;return 1<t?(0,a.translate)("name_and_x_others",{name:e,count:t}):(0,a.translate)("name_and_1_other",{name:e})},n.getAuthorNameForPrefix=function(e,t){var r=!e.isBot,n=e.isAdmin&&r,o="user"===e.type&&e.id===this.props.userId;if(!n||t)return r&&!t||o&&t?(0,a.translate)("you"):e.firstName},n.renderSummaryContentAuthorPrefix=function(e){var t=0<this.props.conversation.participants.length,r=this.getAuthorNameForPrefix(e,t);return r?l.default.createElement("span",{className:"intercom-conversation-summary-content-author-prefix"},r+": "):null},n.renderSummaryContent=function(){var e=this.getConversationParts(),t=(0,i.getSummaryContext)(e),r=t.author,n=t.summaryText,o=t.isMetadata;return l.default.createElement("div",{className:"intercom-conversation-summary-content-container"},this.renderSummaryContentAuthorPrefix(r),l.default.createElement(f.default,{text:n,tagName:"div",className:this.getSummaryContentTextClassNames(o)}))},n.render=function(){var t=this,e=this.props.conversation,r=e.lastPartCreatedAt,n=e.lastParticipatingAdmin,o=e.userParticipated,a=e.read,i=this.getAuthorName(n),s=this.getTeamAdmins();return l.default.createElement("div",{className:this.getClassNames(),onClick:t.handleClick,ref:function(e){return t.node=e},onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleClick(e)},role:"button",tabIndex:"0"},a?null:l.default.createElement("span",{className:"intercom-conversation-summary-unread-dot"}),l.default.createElement("div",{className:"intercom-conversation-summary-avatar"},n?l.default.createElement(c.default,{admin:n}):l.default.createElement(u.default,{admins:s})),l.default.createElement("div",{className:"intercom-conversation-summary-body"},l.default.createElement("div",{className:"intercom-conversation-summary-meta"},l.default.createElement("div",{className:"intercom-conversation-summary-body-author"},this.shouldRenderParticipants()?this.renderParticipantsAndAuthor(i):i),l.default.createElement("div",{className:"intercom-conversation-summary-timestamp"},r?m(r):null)),l.default.createElement("div",{className:"intercom-conversation-summary-content"},this.renderSummaryContent(),o?l.default.createElement("span",{className:"intercom-conversation-summary-user-icon"}):null)))},r}(l.Component);(t.default=h).propTypes={appName:n.default.string.isRequired,appAdmins:n.default.array.isRequired,userId:n.default.string.isRequired,conversation:n.default.shape({id:n.default.string.isRequired,userParticipated:n.default.bool.isRequired,read:n.default.bool.isRequired,lastPartCreatedAt:n.default.instanceOf(Date).isRequired,lastParticipatingAdmin:n.default.shape({firstName:n.default.string,initial:n.default.string}),participants:n.default.array.isRequired,parts:n.default.arrayOf(n.default.shape({author:n.default.shape({firstName:n.default.string,isAdmin:n.default.boolean}),body:n.default.array.isRequired})).isRequired}).isRequired,onClick:n.default.func,rowIndex:n.default.number}},1134:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TRANSITION_DURATION=void 0;var i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),a=n(r(14)),s=r(177),l=n(r(1103));function n(e){return e&&e.__esModule?e:{default:e}}t.TRANSITION_DURATION=500;var o=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var o=n.prototype;return o.getClassName=function(){var e;return(0,a.default)(((e={"intercom-home-screen-card":!0,"intercom-home-screen-messenger-card":!0})["intercom-home-screen-messenger-card-"+this.props.index]=!0,e))},o.render=function(){var e=this.props,t=e.cardUri,r=e.isFailed,n=e.isFetched,o=e.index,a=e.frameWindow;return i.default.createElement(s.TransitionGroup,{component:"div",appear:!n,enter:!n,exit:!n},r?null:i.default.createElement(s.CSSTransition,{classNames:"intercom-messenger-card-failed-animation",timeout:{enter:500,exit:500}},i.default.createElement("div",{className:this.getClassName()},i.default.createElement(l.default,{cardUri:t,homeScreenIndex:o,frameWindow:a}))))},n}(i.PureComponent);t.default=o},1135:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapStateToProps=i,t.default=void 0;var n,o=r(42),a=(n=r(869))&&n.__esModule?n:{default:n};function i(e,t){var r,n,o=t.intercomLinkSolution,a=t.composerHeight,i=t.currentView;e.session&&(r=e.session.appId),e.user&&(n=e.user.id);var s=e.app;return{appId:r,appName:s.name,userId:n,composerHeight:a,intercomLinkSolution:o,currentView:i,isDeveloperWorkspace:s.isDeveloperWorkspace}}var s=(0,o.connect)(i)(a.default);t.default=s},1291:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.transitionEnterOrAppearTimeout=t.transitionExitTimeout=void 0;var a=n(r(417)),i=n(r(178)),m=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),s=n(r(14)),l=r(177),h=n(r(1292)),v=n(r(1294)),g=n(r(1297)),y=n(r(1322)),c=n(r(1135)),b=n(r(794)),u=r(26),d=r(48),p=r(1089),f=r(130),_=r(1075),C=r(859),O=r(730),w=n(r(727)),P=r(27);function n(e){return e&&e.__esModule?e:{default:e}}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.transitionExitTimeout=250;t.transitionEnterOrAppearTimeout=1400;var j={"background-1":r(1360),"background-2":r(1361),"background-3":r(1362),"background-4":r(1363),"background-5":r(1364),"background-6":r(1365),"background-7":r(1366),"background-8":r(1367)},N="intercom-mobile-messenger-active",o=function(n){var e,t;function r(){for(var c,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return M(S(c=n.call.apply(n,[this].concat(t))||this),"focusTrap",null),M(S(c),"messengerContainer",null),M(S(c),"state",{backgroundImage:void 0,maxHeaderHeight:0,headerHeight:void 0,bodyScrollTop:0,previousView:void 0,wasBooting:!1,isMobileScreenSize:(0,f.isMobileSize)(c.props.appWindow),prevProps:c.props}),M(S(c),"isMobileScreenSizeDebounced",(0,i.default)(function(){return c.isMobileScreenSize()},300)),M(S(c),"handleHeaderHeightChange",function(e){c.setState({maxHeaderHeight:e,headerHeight:e})}),M(S(c),"handleWheel",function(e){var t=c.props,r=t.currentView,n=t.shouldShowUpfrontEmailComposer,o=t.upfrontEmailCollectorShowing,a=c.state,i=a.headerHeight,s=a.maxHeaderHeight;if(i&&!("home-screen"===r||n&&o)){var l=(0,C.clamp)(i-e.deltaY,75,s);c.setState({headerHeight:l}),c.handleWheelEnd(e)}}),M(S(c),"handleWheelEnd",(0,_.debounceEventHandler)(function(){c.getHeaderPercentageCollapsed()<=.5?c.handleHeaderExpand():c.handleHeaderCollapse()},200)),M(S(c),"handleHeaderExpand",function(){c.setState({headerHeight:c.state.maxHeaderHeight})}),M(S(c),"handleHeaderCollapse",function(){c.setState({headerHeight:75})}),M(S(c),"handleBodyScroll",function(e){c.setState({bodyScrollTop:e})}),c}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.componentDidMount=function(){var e=this;this.addMobileTagsAndClasses(),(0,d.addEventListener)(this.props.appWindow,"resize",this.isMobileScreenSizeDebounced),this.focusMessenger();var t=function(){return(0,O.launcherFirstFocusableElement)()};this.focusTrap=new w.default({document:this.props.frameWindow.document,firstElement:t,lastElement:t,disableEndingTrap:function(){return e.props.isLauncherEnabled}}),(0,P.endTimingMetric)("openedMessenger")},o.componentDidUpdate=function(e){var t=this.props,r=t.backgroundImage,n=t.currentView;this.state.wasBooting&&this.focusTrap&&this.focusTrap.recalculateFocusableElements(),e.currentView!==n&&"home-screen"===n&&this.focusMessenger(),e.backgroundImage!==r&&this.setBackgroundImage(r)},o.componentWillUnmount=function(){this.removeMobileTagsAndClasses(),this.restoreMobileScrollPosition(),(0,d.removeEventListener)(this.props.appWindow,"resize",this.isMobileScreenSizeDebounced),this.focusTrap&&this.focusTrap.restore()},r.getDerivedStateFromProps=function(e,t){if(!t||(0,a.default)(e,t.prevProps))return null;var r=e.currentView,n=e.isBooting;return t.prevProps.currentView!==r?{previousView:t.prevProps.currentView,prevProps:e}:t.prevProps.isBooting||!n?{wasBooting:t.prevProps.isBooting,prevProps:e}:{prevProps:e}},o.focusMessenger=function(){var e=this.props.currentView;this.messengerContainer&&"conversation"!==e&&"new-conversation"!==e&&this.messengerContainer.focus()},o.isMobileScreenSize=function(){this.setState({isMobileScreenSize:(0,f.isMobileSize)(this.props.appWindow)})},o.getHeaderPercentageCollapsed=function(){var e=this.state,t=e.maxHeaderHeight,r=e.headerHeight;return t&&r&&75!==t?1-Math.abs((r-75)/(t-75)):1},o.setBackgroundImage=function(e){var t=this,r=j[e];r&&(this.setState({backgroundImage:void 0}),(0,p.getImage)(r).then(function(){return t.setState({backgroundImage:e})}))},o.addMobileTagsAndClasses=function(){if((0,u.isMobileBrowser)()&&(0,f.isMobileSize)()){var e=this.props.appWindow;(0,f.addViewportMetaTag)(e),(0,d.addClass)(e.document.documentElement,N)}},o.removeMobileTagsAndClasses=function(){if((0,u.isMobileBrowser)()&&(0,f.isMobileSize)()){var e=this.props.appWindow;(0,f.removeViewportMetaTag)(e),(0,d.removeClass)(e.document.documentElement,N)}},o.restoreMobileScrollPosition=function(){if((0,u.isMobileBrowser)()&&(0,f.isMobileSize)()){var e=this.props.scrollTop;window&&window.parent&&window.parent.scrollTo&&window.parent.scrollTo(0,e)}},o.getClassName=function(){var e,t=this.state.previousView;return t=t||"",(0,s.default)("intercom-messenger","intercom-messenger-"+this.props.currentView,((e={})["intercom-messenger-from-"+t]=""!==t,e["intercom-messenger-from-booting"]=this.state.wasBooting,e["intercom-is-mobile-screen-size"]=this.state.isMobileScreenSize,e))},o.renderLink=function(e){var t=this.props.isIntercomLinkEnabled;return m.default.createElement("div",{className:"intercom-messenger-link-container"},m.default.createElement(l.CSSTransition,{in:t&&-1!==["home-screen","empty-screen"].indexOf(e),appear:!0,timeout:{enter:1400,exit:250},classNames:"intercom-messenger-link-view",unmountOnExit:!0},m.default.createElement(c.default,{intercomLinkSolution:"live-chat",currentView:e})))},o.render=function(){var t=this,e=this.props,r=e.appWindow,n=e.frameWindow,o=e.currentView,a=e.isBooting,i=e.isSheetOpen,s=e.isLauncherEnabled,l=this.state,c=l.headerHeight,u=l.bodyScrollTop,d=this.getHeaderPercentageCollapsed(),p=1===d,f={tabIndex:i?"-1":"0","aria-hidden":i||void 0};return m.default.createElement("div",null,m.default.createElement("div",E({className:this.getClassName(),onWheel:this.handleWheel,ref:function(e){return t.messengerContainer=e}},f),m.default.createElement(v.default,{currentView:o,headerHeight:c}),m.default.createElement(g.default,{isBooting:a,currentView:o,height:c,percentageCollapsed:d,bodyScrollTop:u,frameWindow:n,onExpand:this.handleHeaderExpand,onHeightChange:this.handleHeaderHeightChange}),m.default.createElement(y.default,{isBooting:a,isHeaderCollapsed:p,headerHeight:c,currentView:o,appWindow:r,frameWindow:n,onHeaderCollapse:this.handleHeaderCollapse,onScroll:this.handleBodyScroll}),this.renderLink(o)),m.default.createElement(h.default,{frameWindow:n}),m.default.createElement(b.default,{appWindow:n}),s?null:m.default.createElement("div",{className:"intercom-visually-hidden",tabIndex:"0"}))},r}(m.Component);t.default=o},1292:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapDispatchToProps=p,t.default=t.selector=void 0;var n,o=r(97),a=r(42),i=r(33),s=r(795),l=(n=r(1293))&&n.__esModule?n:{default:n},c=r(734);var u=r(62),d=(0,i.createStructuredSelector)({isSheetsDataLoaded:c.isSheetsDataLoadedSelector,isProxyLoaded:c.isProxyLoadedSelector,isOpen:c.isOpenSelector,url:c.sheetUrlSelector,sheetsData:c.stringifiedSheetDataSelector,sourceCard:c.sourceCardSelector,isNavigating:c.isNavigatingSelector,sheetTitle:c.sheetTitleSelector});function p(e){var t=s.receiveSheetMessage.bind(null,u),r=s.submitSheet.bind(null,u);return(0,o.bindActionCreators)({startNavigation:s.startNavigation,finishNavigation:s.finishNavigation,closeSheet:s.closeSheet,submitSheet:r,setFrameLoadedStatus:s.setFrameLoadedStatus,setProxyLoadedStatus:s.setProxyLoadedStatus,setSheetTitle:s.setSheetTitle,receiveSheetMessage:t},e)}t.selector=d;var f=(0,a.connect)(d,p)(l.default);t.default=f},1293:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,m=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),h=r(177),v=(n=r(864))&&n.__esModule?n:{default:n};function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r,n.prototype.render=function(){var e=this.props,t=e.isSheetsDataLoaded,r=e.isProxyLoaded,n=e.isOpen,o=e.isNavigating,a=e.url,i=e.closeSheet,s=e.sheetsData,l=e.startNavigation,c=e.setProxyLoadedStatus,u=e.sheetTitle,d=e.receiveSheetMessage,p=e.frameWindow,f={isSheetsDataLoaded:t,isProxyLoaded:r,isNavigating:o,url:a,sheetsData:s,closeSheet:i,setProxyLoadedStatus:c,sheetTitle:u,startNavigation:l,receiveSheetMessage:d,transitionTimeout:300};return m.default.createElement(h.TransitionGroup,null,n?m.default.createElement(h.CSSTransition,{classNames:"intercom-messenger-sheet",timeout:{enter:300,exit:300}},m.default.createElement(v.default,g({key:"sheet"},f,{frameWindow:p}))):null)},n}(m.PureComponent);t.default=o},1294:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(33),o=r(97),a=r(42),i=d(r(62)),s=d(r(1295)),l=r(453),c=r(795),u=r(1296);function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,n.createStructuredSelector)({isShown:u.isShownSelector,alertPayload:u.alertPayloadSelector,alertType:u.alertTypeSelector});var f=(0,a.connect)(p,function(e){return(0,o.bindActionCreators)({submitMessengerCardAction:l.submitMessengerCardAction.bind(null,i.default),submitSheet:c.submitSheet.bind(null,i.default)},e)})(s.default);t.default=f},1295:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=r(43),s=(n=r(733))&&n.__esModule?n:{default:n};function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(o){var e,t;function r(){for(var n,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return l(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n=o.call.apply(o,[this].concat(t))||this),"handleTryAgain",function(){var e=n.props,t=e.alertType,r=e.alertPayload;switch(t){case"MessengerCardSubmitError":n.props.submitMessengerCardAction(r.cardUri,r.componentId,r.inputValues);break;case"MessengerSheetSubmitError":n.props.submitSheet(r.sheetValues)}}),n}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.isPageHomescreen=function(){return"home-screen"===this.props.currentView},n.getStyle=function(){var e=this.props.headerHeight;return{top:(this.isPageHomescreen()?0:e)+16}},n.render=function(){var t=this;return this.props.isShown?a.default.createElement("div",{className:"intercom-messenger-alerts",style:this.getStyle()},a.default.createElement(s.default,null),a.default.createElement("span",null,(0,i.translate)("something_is_wrong"),". "),a.default.createElement("span",{className:"try-again",onClick:t.handleTryAgain,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleTryAgain(e)},role:"button",tabIndex:"0"},(0,i.translate)("try_again"))):null},r}(a.PureComponent);l(t.default=o,"defaultProps",{headerHeight:0})},1296:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.alertPayloadSelector=t.alertTypeSelector=t.isShownSelector=void 0;var n=r(182),o=r(33),a=function(e){return e.messengerAlerts},i=(0,o.createSelector)(a,function(e){return e.isShown});t.isShownSelector=i;var s=(0,o.createSelector)(a,function(e){return e.alertType});t.alertTypeSelector=s;var l=(0,o.createSelector)(a,function(e){return(e.alertPayload||(0,n.Map)()).toJS()});t.alertPayloadSelector=l},1297:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(42),a=r(33),i=(n=r(1298))&&n.__esModule?n:{default:n};var s=(0,a.createStructuredSelector)({backgroundImage:function(e){return e.app.backgroundImage}}),l=(0,o.connect)(s)(i.default);t.default=l},1298:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(417)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=n(r(14)),d=r(177),p=n(r(1299)),f=n(r(1300)),m=n(r(1316)),h=n(r(1318)),v=n(r(1321));function n(e){return e&&e.__esModule?e:{default:e}}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(o){var e,t;function r(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(s(e=o.call.apply(o,[this].concat(r))||this),"state",{isTransitioning:!1}),l(s(e),"viewTransitionTimeout",null),e}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidUpdate=function(e){var t=this;(0,a.default)(e,this.props)||this.props.currentView!==e.currentView&&(this.setState({isTransitioning:!0}),this.viewTransitionTimeout=setTimeout(function(){t.viewTransitionTimeout&&t.setState({isTransitioning:!1})},320))},n.componentWillUnmount=function(){this.viewTransitionTimeout&&(clearTimeout(this.viewTransitionTimeout),this.viewTransitionTimeout=null)},n.getClassName=function(){var e,t=this.props,r=t.percentageCollapsed,n=t.backgroundImage;return(0,i.default)("intercom-messenger-header",((e={"intercom-messenger-header-scrolling":0!==r&&1!==r,"intercom-messenger-header-transitioning":this.state.isTransitioning})["intercom-messenger-header-"+(n||"")]=!!n,e))},n.renderView=function(){var e=this.props,t=e.currentView,r=e.isBooting,n=e.percentageCollapsed,o=e.bodyScrollTop,a=e.height,i=e.frameWindow,s=e.onExpand,l=e.onHeightChange,c={key:r?"booting":t,classNames:"intercom-messenger-header-view",timeout:{enter:500,exit:250}};return r?u.default.createElement(d.CSSTransition,c,u.default.createElement(p.default,{key:"booting",onHeightChange:l})):"home-screen"===t?u.default.createElement(d.CSSTransition,c,u.default.createElement(h.default,{height:a,bodyScrollTop:o,onHeightChange:l})):"conversations"===t?u.default.createElement(d.CSSTransition,c,u.default.createElement(m.default,{key:"conversations",onHeightChange:l})):"empty-screen"===t||"messenger-trigger"===t?u.default.createElement(d.CSSTransition,c,u.default.createElement(v.default,{key:"empty"})):"conversation"===t||"new-conversation"===t?u.default.createElement(d.CSSTransition,g({},c,{key:"conversation"}),u.default.createElement(f.default,{percentageCollapsed:n,frameWindow:i,onExpand:s,onHeightChange:l})):void 0},n.render=function(){return u.default.createElement("div",{className:this.getClassName(),style:{height:this.props.height}},u.default.createElement(d.TransitionGroup,{appear:!0},this.renderView()))},r}(u.PureComponent);t.default=o},1299:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),a=r(798);var n=function(s){var e,t;function r(){for(var e,t,r,n,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e=s.call.apply(s,[this].concat(a))||this,t=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e),n=void 0,(r="node")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}t=s,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){if(this.node){var e=this.node.getBoundingClientRect().height;this.props.onHeightChange(e)}},n.render=function(){var t=this;return o.default.createElement(a.BootingStyledHeader,{ref:function(e){return t.node=e}})},r}(o.PureComponent);t.default=n},1300:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapStateToProps=void 0;var n=r(42),o=a(r(1301)),g=r(423),y=a(r(729));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t,r,n=(0,g.currentConversationSelector)(e),o=n.parts,a=n.lastParticipatingAdmin,i=n.participants,s=e.app,l=s.name,c=s.teamIntro,u=s.activeAdmins,d=s.expectedResponseDelay,p=s.compactExpectedResponseDelay,f=s.officeHoursResponse,m=s.isIntercomLinkEnabled,h=!(0,y.default)(e),v=o[0]?o[0].teamAuthor:void 0;return v&&(t=v.name,r=v.admins),{appName:l,appAdmins:u,appTeamIntro:c,teamName:t,teamAdmins:r,lastParticipatingAdmin:a,participants:i,appExpectedResponseDelay:d,appCompactExpectedResponseDelay:p,officeHoursResponse:f,isIntercomLinkEnabled:m,isCloseButtonEnabled:h}};t.mapStateToProps=i;var s=(0,n.connect)(i)(o.default);t.default=s},1301:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(r(417)),v=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),n=o(r(22)),i=o(r(14)),g=o(r(1077)),y=o(r(1306)),b=o(r(1307)),_=r(26);function o(e){return e&&e.__esModule?e:{default:e}}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){l(t,e,r[e])})}return t}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(o){var e,t;function r(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e=o.call.apply(o,[this].concat(r))||this),"node",void 0),e}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){this.calculateHeight()},n.componentDidUpdate=function(e){var t=s({},e.lastParticipatingAdmin,{lastActiveAt:null}),r=s({},this.props.lastParticipatingAdmin,{lastActiveAt:null});(0,a.default)(t,r)||this.calculateHeight()},n.calculateHeight=function(){if(this.node){var e=this.node.getBoundingClientRect().height;this.props.onHeightChange(e)}},n.getClassName=function(e){return(0,i.default)({"intercom-conversation-header":!0,"intercom-conversation-header-close-button-enabled":this.props.isCloseButtonEnabled,"intercom-conversation-header-download-transcript-button-enabled":e})},n.render=function(){var t=this,e=this.props,r=e.lastParticipatingAdmin,n=e.participants,o=e.appName,a=e.appAdmins,i=e.appTeamIntro,s=e.teamName,l=e.teamAdmins,c=e.appExpectedResponseDelay,u=e.appCompactExpectedResponseDelay,d=e.officeHoursResponse,p=e.percentageCollapsed,f=e.onExpand,m=1!==p,h=!(0,_.isMobileBrowser)()&&m&&!!r;return v.default.createElement("div",{ref:function(e){return t.node=e},className:this.getClassName(h)},v.default.createElement(g.default,{currentView:"conversation",closeButtonClassName:"intercom-conversation-header-close-button",backButtonClassName:"intercom-conversation-header-back-button",percentageCollapsed:p,isDownloadTranscriptButtonEnabled:h}),v.default.createElement("div",{className:"intercom-conversation-header-body"},r?v.default.createElement(b.default,{appName:o,admin:r,participants:n,percentageCollapsed:p,onExpand:f}):v.default.createElement(y.default,{appName:s||o,appAdmins:l||a,appTeamIntro:i,appExpectedResponseDelay:c,appCompactExpectedResponseDelay:u,officeHoursResponse:d,percentageCollapsed:p,outOfOffice:void 0!==d,onExpand:f})))},r}(v.PureComponent);l(t.default=c,"contextTypes",{addMetric:n.default.func})},1302:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),n=o(r(22)),i=o(r(14)),s=o(r(1303)),l=o(r(857)),c=o(r(1304)),u=r(130),d=r(43);function o(e){return e&&e.__esModule?e:{default:e}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(o){var e,t;function r(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return f(p(t=o.call.apply(o,[this].concat(r))||this),"state",{isHoveringOnCloseButton:!1}),f(p(t),"handleBackClick",function(e){e.preventDefault(),t.context.addMetric("clicked","back_button","messenger",""),t.props.onBackClick()}),f(p(t),"handleCloseClick",function(){t.context.addMetric("closed","messenger","messenger","from_close_button"),t.props.onCloseClick()}),f(p(t),"handleMouseEnter",function(){t.setState({isHoveringOnCloseButton:!0})}),f(p(t),"handleMouseLeave",function(){t.setState({isHoveringOnCloseButton:!1})}),f(p(t),"handleTranscriptDownload",function(){var e=t.props.conversationId;e&&(t.context.addMetric("download_transcript","conversation","messenger","",{conversation_id:e}),t.props.onDownloadTranscript(e))}),t}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.getCloseButtonClassName=function(){var e=this.props,t=e.isCloseButtonEnabled,r=e.closeButtonClassName;return(0,i.default)("intercom-messenger-header-buttons-close-button",r,{"intercom-messenger-header-buttons-close-button-enabled":t})},n.getBackButtonClassName=function(){return"intercom-messenger-header-buttons-back-button "+this.props.backButtonClassName},n.getDownloadTranscriptButtonOpacity=function(){var e=this.props.percentageCollapsed;return 0===e?null:1-e<=.2?0:1-e},n.getCloseButtonBodyStyle=function(){var e=this.props.headerOpacity;if(!e&&0!==e)return{};var t=Math.abs(.3*(e-1));return{backgroundColor:"rgba(0, 0, 0, "+(this.state.isHoveringOnCloseButton?.5:t)+")"}},n.renderBackButton=function(){var t=this,e=this.props.unreadConversationCount;return a.default.createElement("div",{className:this.getBackButtonClassName(),onClick:t.handleBackClick,"aria-label":(0,d.translate)("navigation_back"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleBackClick(e)},role:"button",tabIndex:"0"},a.default.createElement("div",{className:"intercom-messenger-header-buttons-back-button-body"},a.default.createElement(s.default,null),0<e?a.default.createElement("span",{className:"intercom-messenger-header-buttons-unread-count"},e):null))},n.renderCloseButton=function(){var t=this,e=this.props.isCloseButtonEnabled;return a.default.createElement("div",{className:this.getCloseButtonClassName(),onClick:t.handleCloseClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,tabIndex:e||(0,u.isMobileSize)()?0:-1,"aria-label":(0,d.translate)("close"),"aria-hidden":!e&&!(0,u.isMobileSize)(),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleCloseClick(e)},role:"button"},a.default.createElement("div",{className:"intercom-messenger-header-buttons-close-button-body",style:this.getCloseButtonBodyStyle()},a.default.createElement(l.default,null)))},n.renderDownloadTranscriptButton=function(){return a.default.createElement(c.default,{isOffsetLeft:this.props.isCloseButtonEnabled,opacity:this.getDownloadTranscriptButtonOpacity(),onClick:this.handleTranscriptDownload,"aria-label":(0,d.translate)("download_transcript")})},n.render=function(){var e=this.props,t=e.isBackButtonEnabled,r=e.isDownloadTranscriptButtonEnabled;return a.default.createElement("div",{className:"intercom-messenger-header-buttons"},t?this.renderBackButton():null,r?this.renderDownloadTranscriptButton():null,this.renderCloseButton())},r}(a.Component);f(t.default=m,"defaultProps",{isBackButtonEnabled:!1,isCloseButtonEnabled:!1,isDownloadTranscriptButtonEnabled:!1,backButtonClassName:"",closeButtonClassName:""}),m.contextTypes={addMetric:n.default.func}},1303:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(1))&&n.__esModule?n:{default:n};var a=function(){return o.default.createElement("svg",{className:"intercom-messenger-header-buttons-back-icon"},o.default.createElement("g",{fill:"none"},o.default.createElement("g",{fill:"#FFF"},o.default.createElement("polygon",{transform:"translate(-40 -29)translate(47.071068 36.071068)rotate(-315)translate(-47.071068 -36.071068)",points:"44.3 38.8 44.3 31.1 42.1 31.1 42.1 40 42.1 41.1 52.1 41.1 52.1 38.8"}))))};t.default=a},1304:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),s=n(r(1305)),l=n(r(14)),c=r(43),u=r(177);function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(o){var e,t;function r(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(a(e=o.call.apply(o,[this].concat(r))||this),"hoverTimeout",void 0),d(a(e),"state",{isHovering:!1}),d(a(e),"handleMouseEnter",function(){e.hoverTimeout=setTimeout(function(){e.setState({isHovering:!0})},200)}),d(a(e),"handleMouseLeave",function(){e.setState({isHovering:!1}),e.clearHoverTimeout()}),e}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentWillUnmount=function(){this.clearHoverTimeout()},n.clearHoverTimeout=function(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=null)},n.renderTooltip=function(){return i.default.createElement(u.CSSTransition,{classNames:"intercom-download-transcript-button-tooltip",mountOnEnter:!0,unmountOnExit:!0,timeout:100,in:this.state.isHovering},i.default.createElement("div",{key:"download-transcript-tooltip",className:"intercom-download-transcript-button-tooltip"},i.default.createElement("span",null,(0,c.translate)("download_transcript"))))},n.render=function(){var e=this.props,t=e.isOffsetLeft,r=e.opacity,n=e.onClick,o="number"==typeof r,a=(0,l.default)({"intercom-download-transcript-button":!0,"intercom-download-transcript-button-secondary":t});return i.default.createElement(u.CSSTransition,{classNames:"intercom-download-transcript-button",in:!0,appear:!o,timeout:500,enter:!1,exit:!1},i.default.createElement("div",{className:a,style:{opacity:r},onClick:n,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"aria-label":(0,c.translate)("download_transcript"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&n(e)},role:"button",tabIndex:"0"},i.default.createElement("div",{className:"intercom-download-transcript-button-body"},i.default.createElement(s.default,null)),this.renderTooltip()))},r}(i.Component);t.default=o},1305:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o.default.createElement("svg",{viewBox:"0 0 16 16",height:"16"},o.default.createElement("path",{fill:"#FFF",d:"M1,14 L15,14 L15,16 L1,16 L1,14 Z M8,12 L2,5.68965517 L3.37704918,4.24137931 L6.99543762,8.00158691 L6.99543762,0 L8.99861145,0 L8.99861145,8.00158691 L12.6229508,4.24137931 L14,5.68965517 L8,12 Z"}))};var n,o=(n=r(1))&&n.__esModule?n:{default:n}},1306:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=n(r(856)),c=n(r(860)),s=n(r(1058)),a=n(r(14)),u=n(r(1129)),d=r(861),p=r(43);function n(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var o=n.prototype;return o.getClassName=function(){var e=1===this.props.percentageCollapsed;return(0,a.default)({"intercom-team-profile":!0,"intercom-team-profile-collapsed":e,"intercom-team-profile-expanded":!e})},o.getResponseDelayClassName=function(){return(0,a.default)({"intercom-team-profile-response-delay":!0,"intercom-team-profile-response-delay-office-hours":this.hasOfficeHoursResponse()})},o.getCompactResponseDelayClassName=function(){return(0,a.default)({"intercom-team-profile-compact-response-delay":!0,"intercom-team-profile-compact-response-delay-office-hours":this.hasOfficeHoursResponse()})},o.getCompactResponseDelayTextClassName=function(){var e=this.props.outOfOffice;return(0,a.default)({"intercom-team-profile-response-delay-text":!0,"intercom-team-profile-response-delay-text-with-icon":e})},o.hasOfficeHoursResponse=function(){return void 0!==this.props.officeHoursResponse},o.getFullStyle=function(){var e=this.props.percentageCollapsed;return{opacity:1-e<=.2?0:1-e}},o.getCompactStyle=function(){var e=this.props.percentageCollapsed;return{opacity:e<=.8?0:e}},o.getResponseDelay=function(){var e=this.props,t=e.officeHoursResponse,r=e.appExpectedResponseDelay;return this.hasOfficeHoursResponse()?t:r},o.getCompactResponseDelay=function(){var e=this.props,t=e.officeHoursResponse,r=e.appCompactExpectedResponseDelay;return this.hasOfficeHoursResponse()?t:r},o.renderFull=function(){var e=this.props,t=e.appAdmins,r=e.appName,n=e.appTeamIntro,o=e.outOfOffice,a=this.getFullStyle();return l.default.createElement("div",{className:"intercom-team-profile-full",style:a,"aria-hidden":0===a.opacity},l.default.createElement("h2",{className:"intercom-team-profile-full-team-name"},r),n?l.default.createElement("div",{className:"intercom-team-profile-full-introduction"},l.default.createElement(s.default,{text:n})):null,l.default.createElement("div",{className:"intercom-team-profile-full-avatar-container"},(0,d.sortByAvatar)(t,3).map(function(e,t){return l.default.createElement("div",{key:t,className:"intercom-team-profile-full-avatar intercom-index-"+t},l.default.createElement(i.default,{admin:e}),l.default.createElement("div",{className:"intercom-team-profile-full-admin-name"},e.firstName))})),n?l.default.createElement("div",{className:"intercom-team-profile-full-intro"},l.default.createElement(s.default,{text:n})):null,l.default.createElement("div",{className:this.getResponseDelayClassName()},l.default.createElement("div",{className:"intercom-team-profile-response-delay-wrapper"},o&&l.default.createElement(u.default,null),l.default.createElement("span",{className:this.getCompactResponseDelayTextClassName()},this.getResponseDelay()))))},o.renderCompact=function(){var e=this.props,t=e.appAdmins,r=e.appName,n=e.outOfOffice,o=e.onExpand,a=e.percentageCollapsed,i=this.getCompactStyle(),s=1!==a;return l.default.createElement("div",f({className:"intercom-team-profile-compact",style:i,"aria-hidden":0===i.opacity,"aria-expanded":s,tabIndex:s?"-1":"0",role:s?"region":"button"},s?{}:{"aria-label":(0,p.translate)("expand_header")},{onClick:o,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&o(e)}}),l.default.createElement("div",{className:"intercom-team-profile-compact-contents"},l.default.createElement(c.default,{admins:t}),l.default.createElement("div",{className:"intercom-team-profile-compact-body"},l.default.createElement("div",{className:"intercom-team-profile-compact-team-name"},r),l.default.createElement("div",{className:this.getCompactResponseDelayClassName()},n&&l.default.createElement(u.default,null),l.default.createElement("span",{className:this.getCompactResponseDelayTextClassName()},this.getCompactResponseDelay())))))},o.render=function(){return l.default.createElement("div",{className:this.getClassName()},this.renderFull(),this.renderCompact())},n}(l.Component);t.default=o},1307:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapStateToProps=void 0;var n=r(42),o=s(r(1308)),a=s(r(729)),i=r(26);function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=(0,a.default)(e);return{isCloseButtonEnabled:(0,i.isMobileBrowser)()||!t}};t.mapStateToProps=l;var c=(0,n.connect)(l)(o.default);t.default=c},1308:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(r(1309)),i=o(r(1310)),s=o(r(1311)),n=o(r(22)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),c=o(r(1312)),u=o(r(856)),d=o(r(860)),p=o(r(1058)),f=o(r(14)),m=r(43),h=o(r(1313)),v=o(r(1314)),g=o(r(1315));function o(e){return e&&e.__esModule?e:{default:e}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var b=r(1062),_=b.getTimeInTimezone,C=b.lastActiveTimeInWords,O=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var o=n.prototype;return o.getClassName=function(){var e=1===this.props.percentageCollapsed;return(0,f.default)({"intercom-admin-profile":!0,"intercom-admin-profile-collapsed":e,"intercom-admin-profile-expanded":!e})},o.getFullStyle=function(){var e=this.props.percentageCollapsed;return{opacity:1-e<=.2?0:1-e}},o.getCompactStyle=function(){var e=this.props.percentageCollapsed;return{opacity:e<=.8?0:e}},o.getFullProfileClassName=function(){return(0,f.default)({"intercom-admin-profile-full":!0,"intercom-admin-profile-full-with-participants":this.shouldRenderParticipants(),"intercom-admin-profile-full-with-close-button":this.props.isCloseButtonEnabled})},o.handleSocialAccountClick=function(e){e.stopPropagation()},o.handleCalendarIconClick=function(e){e.stopPropagation()},o.hasActiveOrAwayResponse=function(){return null!==this.props.admin.isActive},o.shouldRenderParticipants=function(){return 0<this.props.participants.length},o.activeOrAwayInWords=function(){return this.props.admin.isActive?(0,m.translate)("active_state"):(0,m.translate)("away_state")},o.adminState=function(){return this.props.admin.isBot?"Bot":this.humanAdminState()},o.humanAdminState=function(){return this.hasActiveOrAwayResponse()?this.activeOrAwayInWords():C(this.props.admin.lastActiveAt)},o.renderActiveOrAwayState=function(){if(this.hasActiveOrAwayResponse()){var e=this.props.admin.isActive?"active":"away";return l.default.createElement("div",{className:"intercom-"+e+"-state"})}return null},o.renderPublicLinks=function(){var e=this.props.admin,t=e.socialAccounts,r=e.calendarUrl;return 0!==t.length||r?l.default.createElement("div",{className:"intercom-admin-profile-full-public-links"},this.renderSocialAccountIcons(),this.renderCalendarIcon()):null},o.renderCalendarIcon=function(){var e=this.props.admin.calendarUrl;return e?l.default.createElement("a",{href:e,"aria-label":(0,m.translate)("teammate_calendar_link"),target:"_blank",onClick:this.handleCalendarIconClick,tabIndex:"0"},l.default.createElement(s.default,null)):null},o.renderSocialAccountIcons=function(){var o=this,e=this.props.admin.socialAccounts,a=0===this.props.percentageCollapsed;return e.map(function(e,t){var r=e.profileUrl,n=e.provider;return l.default.createElement("a",{key:t,href:r,target:"_blank",onClick:o.handleSocialAccountClick,"aria-label":(0,m.translate)("teammate_profile",{provider:n}),tabIndex:a?0:-1},o.renderSocialAccountIcon(n))})},o.renderSocialAccountIcon=function(e){switch(e){case"linkedin":return l.default.createElement(a.default,null);case"twitter":return l.default.createElement(i.default,null);default:return null}},o.renderBackgroundImage=function(){var e=this.props.admin.avatar.square128;return e?l.default.createElement("div",{className:"intercom-admin-profile-full-background",style:{backgroundImage:"url("+e+")"}}):null},o.locationExists=function(){var e=this.props.admin.location;if(!e)return!1;var t=e.countryName;return t&&0<t.length},o.getLocationText=function(e){var t=e.cityName,r=e.countryName;return t&&0<t.length?t+", "+r:r},o.getTimeText=function(e){if(null!=e)return _(new Date,e)},o.renderLocation=function(){var e=this.props.admin.location,t=this.getLocationText(e),r=this.getTimeText(e.timezoneOffset);return l.default.createElement("div",{className:"intercom-admin-profile-full-local-time"},l.default.createElement(v.default,null),r?(0,m.translate)("profile_location",{time:r,location:t}):t)},o.renderRemainingParticipantCount=function(e){return 0===e?null:l.default.createElement("div",{className:"intercom-admin-profile-remaining-participants"},(0,m.translate)("plus_x_participants",{count:e}))},o.renderConversationParticipants=function(){var e=this.props.participants,t=e.slice(0,13),r=e.slice(13).length;return l.default.createElement("div",{className:"intercom-admin-profile-conversation-participants-wrapper"},l.default.createElement("div",{className:"intercom-admin-profile-conversation-participants-header"},(0,m.translate)("also_in_this_conversation")),l.default.createElement("div",{className:"intercom-admin-profile-conversation-participants"},t.map(function(e,t){return l.default.createElement(c.default,y({key:t},e))}),this.renderRemainingParticipantCount(r)))},o.renderJobTitleAndLocation=function(){var e=this.props.admin.jobTitle,t=this.locationExists();return e||t?l.default.createElement("div",{className:"intercom-admin-profile-full-title-and-location"},e?l.default.createElement("div",{className:"intercom-admin-profile-full-title"},l.default.createElement(h.default,null),l.default.createElement(p.default,{text:e})):null,t?this.renderLocation():null):null},o.renderFull=function(){var e=this.props.admin,t=e.firstName,r=e.intro,n=this.getFullStyle();return l.default.createElement("div",{className:this.getFullProfileClassName(),style:n,"aria-hidden":0===n.opacity},this.renderBackgroundImage(),l.default.createElement("div",{className:"intercom-admin-profile-full-avatar"},l.default.createElement(u.default,{admin:e}),this.renderActiveOrAwayState()),l.default.createElement("div",{className:"intercom-admin-profile-full-body"},l.default.createElement("h3",{className:"intercom-admin-profile-full-admin-name"},t),l.default.createElement("div",{className:"intercom-admin-profile-full-last-active"},this.adminState())),this.renderJobTitleAndLocation(),r?l.default.createElement("div",{className:"intercom-admin-profile-full-intro"},l.default.createElement(g.default,null),l.default.createElement(p.default,{text:r,className:"intercom-admin-profile-full-intro-text"})):null,this.renderPublicLinks(),this.shouldRenderParticipants()?this.renderConversationParticipants():null)},o.renderCompactBody=function(){var e=this.props.admin.firstName;return l.default.createElement("div",{className:"intercom-admin-profile-compact-contents"},l.default.createElement("div",{className:"intercom-admin-profile-compact-avatar"},l.default.createElement(u.default,{admin:this.props.admin}),this.renderActiveOrAwayState()),l.default.createElement("div",{className:"intercom-admin-profile-compact-body"},l.default.createElement("div",{className:"intercom-admin-profile-compact-admin-name"},e),l.default.createElement("div",{className:"intercom-admin-profile-compact-last-active"},this.adminState())))},o.renderParticipantCompactBody=function(){var e=this.props.admin,t=e.firstName,r=e.initial,n=e.avatar,o=[{name:t,type:"Admin",isActive:e.isActive,initial:r,avatar:n}].concat(this.props.participants),a=this.props.participants.length;return l.default.createElement("div",{className:"intercom-admin-profile-compact-contents"},l.default.createElement(d.default,{admins:o}),l.default.createElement("div",{className:"intercom-admin-profile-compact-body"},l.default.createElement("div",{className:"intercom-admin-profile-compact-admin-name intercom-admin-profile-compact-admin-name-and-participants"},1<a?(0,m.translate)("name_and_x_others",{name:t,count:a}):(0,m.translate)("name_and_1_other",{name:t}))))},o.renderCompact=function(){var e=this.props,t=e.onExpand,r=e.percentageCollapsed,n=this.getCompactStyle(),o=1!==r;return l.default.createElement("div",y({className:"intercom-admin-profile-compact",style:n,"aria-hidden":0===n.opacity,"aria-expanded":o,tabIndex:o?"-1":"0",role:o?"region":"button"},o?{}:{"aria-label":(0,m.translate)("expand_header")},{onClick:t,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t(e)}}),this.shouldRenderParticipants()?this.renderParticipantCompactBody():this.renderCompactBody())},o.render=function(){return l.default.createElement("div",{className:this.getClassName()},this.renderFull(),this.renderCompact())},n}(l.Component);(t.default=O).propTypes={admin:n.default.shape({firstName:n.default.string.isRequired,initial:n.default.string,lastActiveAt:n.default.instanceOf(Date).isRequired,isActive:n.default.bool,isBot:n.default.bool,socialAccounts:n.default.arrayOf(n.default.shape({profileUrl:n.default.string.isRequired,provider:n.default.string.isRequired})).isRequired,avatar:n.default.shape({square128:n.default.string}),location:n.default.shape({cityName:n.default.string,countryName:n.default.string,countryCode:n.default.string,timezoneOffset:n.default.number}),jobTitle:n.default.string,calendarUrl:n.default.string}),participants:n.default.arrayOf(n.default.shape({name:n.default.string,initial:n.default.string,avatar:n.default.object,type:n.default.oneOf(["Admin","User","Team"])})).isRequired,percentageCollapsed:n.default.number,isCloseButtonEnabled:n.default.bool,onExpand:n.default.func}},1309:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(1))&&n.__esModule?n:{default:n};var a=function(){return o.default.createElement("svg",{className:"intercom-admin-profile-full-social-account intercom-admin-profile-full-social-account-linkedin",viewBox:"0 0 16 16"},o.default.createElement("g",{fill:"none"},o.default.createElement("g",{fill:"#B3C9FF"},o.default.createElement("path",{d:"M13.6 0C14.9 0 16 1.1 16 2.4L16 13.6C16 14.9 14.9 16 13.6 16L2.4 16C1.1 16 0 14.9 0 13.6L0 2.4C0 1.1 1.1 0 2.4 0L13.6 0ZM4.8 13.5L4.8 6.2 2.4 6.2 2.4 13.5 4.8 13.5ZM3.6 5.2C4.5 5.2 5 4.7 5 4 5 3.3 4.5 2.7 3.7 2.7 2.8 2.7 2.3 3.3 2.3 4 2.3 4.7 2.8 5.2 3.6 5.2L3.6 5.2ZM6.2 13.5L8.6 13.5 8.6 9.4C8.6 9.2 8.6 9 8.7 8.8 8.8 8.4 9.2 8 9.9 8 10.8 8 11.1 8.6 11.1 9.6L11.1 13.5 13.5 13.5 13.5 9.3C13.5 7.1 12.3 6.1 10.7 6.1 9.4 6.1 8.9 6.8 8.6 7.3L8.6 7.3 8.6 6.2 6.2 6.2C6.2 6.9 6.2 13.5 6.2 13.5Z"}))))};t.default=a},1310:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(1))&&n.__esModule?n:{default:n};var a=function(){return o.default.createElement("svg",{className:"intercom-admin-profile-full-social-account intercom-admin-profile-full-social-account-twitter",viewBox:"0 0 18 15"},o.default.createElement("g",{fill:"none"},o.default.createElement("g",{fill:"#B3C9FF"},o.default.createElement("path",{d:"M18 1.8C17.3 2.1 16.6 2.3 15.9 2.4 16.6 1.9 17.2 1.2 17.5 0.3 16.8 0.7 16 1 15.2 1.2 14.5 0.5 13.5 0 12.5 0 10.4 0 8.8 1.7 8.8 3.8 8.8 4.1 8.8 4.4 8.9 4.6 5.8 4.5 3.1 3 1.3 0.7 0.9 1.3 0.8 1.9 0.8 2.6 0.8 3.9 1.4 5.1 2.4 5.7 1.8 5.7 1.2 5.6 0.7 5.3 0.7 5.3 0.7 5.3 0.7 5.3 0.7 7.2 2 8.7 3.7 9 3.4 9.1 3.1 9.2 2.7 9.2 2.5 9.2 2.2 9.1 2 9.1 2.5 10.6 3.9 11.7 5.5 11.7 4.2 12.7 2.6 13.4 0.9 13.4 0.6 13.4 0.3 13.3 0 13.3 1.6 14.4 3.6 15 5.7 15 12.5 15 16.2 9.2 16.2 4.2 16.2 4.1 16.2 3.9 16.2 3.7 16.9 3.2 17.5 2.5 18 1.8"}))))};t.default=a},1311:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(1))&&n.__esModule?n:{default:n};var a=function(){return o.default.createElement("svg",{viewBox:"0 0 16 16",className:"intercom-admin-profile-full-social-account intercom-admin-profile-full-calendar"},o.default.createElement("rect",{fill:"black",fillOpacity:"0"}),o.default.createElement("path",{fillRule:"evenodd",fill:"#B3C9FF",clipRule:"evenodd",d:"M2 1C2 0.762695 2.08301 0.544922 2.2207 0.373047C2.40332 0.145508 2.68457 0 3 0C3.27148 0 3.51758 0.108398 3.69824 0.283203C3.88477 0.464844 4 0.71875 4 1V3H10V1C10 0.447266 10.4473 0 11 0C11.5527 0 12 0.447266 12 1V3H13C13.5527 3 14 3.44727 14 4V5H0V4C0 3.92578 0.0078125 3.85352 0.0234375 3.78418C0.0537109 3.64551 0.114258 3.5166 0.196289 3.40527C0.37793 3.15918 0.669922 3 1 3H2V1ZM0 6H14V14C14 14.4297 13.8652 14.8271 13.6348 15.1533C13.5186 15.3174 13.3789 15.4629 13.2197 15.5859C13.0723 15.6992 12.9082 15.793 12.7324 15.8623C12.5059 15.9512 12.2588 16 12 16H2C0.895508 16 0 15.1045 0 14V6ZM5 7H4V9H2V10H4V12H2V13H4V15H5V13H9V15H10V13H12V12H10V10H12V9H10V7H9V9H5V7ZM9 12V10H5V12H9Z"}))};t.default=a},1312:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),a=(n=r(856))&&n.__esModule?n:{default:n};var i=function(s){var e,t;function r(){for(var e,t,r,n,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e=s.call.apply(s,[this].concat(a))||this,t=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e),n=void 0,(r="participantName")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}t=s,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.getParticipantNameStyles=function(){if(this.participantName)return{marginLeft:-this.participantName.offsetWidth/2}},n.render=function(){var t=this;return o.default.createElement("div",{className:"intercom-admin-profile-conversation-participant"},o.default.createElement(a.default,{admin:this.props}),o.default.createElement("div",{className:"intercom-admin-profile-conversation-participant-name",ref:function(e){return t.participantName=e},style:this.getParticipantNameStyles()},o.default.createElement("span",{className:"intercom-admin-profile-conversation-participant-name-wrapper"},this.props.name)))},r}(o.Component);t.default=i},1313:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(1))&&n.__esModule?n:{default:n};var a=function(){return o.default.createElement("svg",{className:"intercom-admin-profile-job-title-icon",viewBox:"0 0 17 15"},o.default.createElement("g",{strokeWidth:"1",fillRule:"evenodd",strokeLinejoin:"round",fill:"none"},o.default.createElement("g",{stroke:"#FFF"},o.default.createElement("g",{transform:"translate(-1073 -120)translate(1002 30)translate(72 90)translate(0 1)"},o.default.createElement("path",{d:"M0.4 6.7L6.7 6.7",strokeLinecap:"round"}),o.default.createElement("path",{d:"M8.9 6.7L15.2 6.7",strokeLinecap:"round"}),o.default.createElement("polygon",{points:"15.2 3.2 0.4 3.2 0.4 13.1 15.2 13.1"}),o.default.createElement("polygon",{points:"8.9 8.9 6.7 8.9 6.7 6 8.9 6"}),o.default.createElement("path",{d:"M5 3.2C5 1.6 6.2 0.4 7.8 0.4 9.4 0.4 10.6 1.6 10.6 3.2"})))))};t.default=a},1314:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(1))&&n.__esModule?n:{default:n};var a=function(){return o.default.createElement("svg",{className:"intercom-admin-profile-location-icon",viewBox:"0 0 18 18"},o.default.createElement("g",{strokeWidth:"1",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"},o.default.createElement("g",{stroke:"#FFF"},o.default.createElement("path",{d:"M16.7 9C16.7 13.2 13.2 16.7 9 16.7 4.8 16.7 1.3 13.2 1.3 9 1.3 4.8 4.8 1.3 9 1.3 13.2 1.3 16.7 4.8 16.7 9L16.7 9Z"}),o.default.createElement("path",{d:"M14.7 3.8C14.7 3.8 14.3 5.7 13 6.3 11.7 6 10.3 7 10.7 7 11 7 11.3 8.3 11.3 8.3 11.7 8.7 12.3 8.3 12.3 8.3 13.2 9.2 11 10.7 11 11 11 11.3 11.8 11.5 11.3 12 10.8 12.5 10.3 12.7 10.3 12.7 10.3 14.3 8.7 14.3 8.3 14.3 8 14.3 7.3 13 7.3 12.7 7.3 12.3 7.7 12 7.7 11.7 7.7 11.3 7 10.7 7 10.7 7 9.3 6 9.7 5 9.7 4 9.7 4 8.3 4 8.3 4 8.3 4 6 5.7 5.7 7.3 5.3 7.3 6 7.3 6 8 6.7 9.3 6 10 6 10 6 10.3 3.7 9.7 4 9 4.3 8.4 4.1 8.3 3.3 8.2 2.3 11.2 1.7 11.2 1.7"}))))};t.default=a},1315:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(1))&&n.__esModule?n:{default:n};var a=function(){return o.default.createElement("svg",{className:"intercom-admin-profile-bio-icon",viewBox:"0 0 16 13"},o.default.createElement("g",{strokeWidth:"1",fillRule:"evenodd",fill:"none"},o.default.createElement("g",{stroke:"#FFF"},o.default.createElement("path",{d:"M5.1 0.9L6.9 2.4C5.3 3.5 3.9 5.5 3.7 7.1 3.8 7.1 4.1 7 4.4 7 5.8 7 6.8 8.1 6.8 9.6 6.8 11.1 5.6 12.3 4.1 12.3 2.5 12.3 1 10.9 1 8.4 1 5.4 2.8 2.6 5.1 0.9ZM13.1 0.9L15 2.4C13.4 3.5 12 5.5 11.8 7.1 11.8 7.1 12.2 7 12.4 7 13.8 7 14.9 8.1 14.9 9.6 14.9 11.1 13.7 12.3 12.2 12.3 10.5 12.3 9.1 10.9 9.1 8.4 9.1 5.4 10.8 2.6 13.1 0.9Z"}))))};t.default=a},1316:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapStateToProps=void 0;var n,o=r(42),a=(n=r(1317))&&n.__esModule?n:{default:n};var i=function(e){return{appName:e.app.name}};t.mapStateToProps=i;var s=(0,o.connect)(i)(a.default);t.default=s},1317:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),a=(n=r(1077))&&n.__esModule?n:{default:n},i=r(43);var s=function(s){var e,t;function r(){for(var e,t,r,n,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e=s.call.apply(s,[this].concat(a))||this,t=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e),n=void 0,(r="node")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}t=s,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){if(this.node){var e=this.node.getBoundingClientRect().height;this.props.onHeightChange(e)}},n.renderBody=function(){return o.default.createElement("h2",{className:"intercom-conversations-header-body"},(0,i.translate)("your_conversations"))},n.render=function(){var t=this;return o.default.createElement("div",{ref:function(e){return t.node=e},className:"intercom-conversations-header"},o.default.createElement(a.default,{currentView:"conversations",closeButtonClassName:"intercom-conversations-header-close-button",backButtonClassName:"intercom-conversations-header-back-button"}),this.renderBody())},r}(o.Component);t.default=s},1318:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapStateToProps=void 0;var n=r(42),o=a(r(1319)),s=a(r(729)),l=r(26);function a(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t=e.app,r=t.teamGreeting,n=t.teamIntro,o=t.logoUrl,a=t.name,i=(0,s.default)(e);return{teamGreeting:r,teamIntro:n,logoUrl:o,appName:a,isCloseButtonEnabled:(0,l.isMobileBrowser)()||!i}};t.mapStateToProps=i;var c=(0,n.connect)(i)(o.default);t.default=c},1319:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var p=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),f=n(r(1077)),m=n(r(1058)),h=n(r(1320)),a=n(r(14));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(o){var e,t;function r(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return s(i(t=o.call.apply(o,[this].concat(r))||this),"node",void 0),s(i(t),"handleHeightChange",function(){if(t.node){var e=t.node.getBoundingClientRect().height;t.props.onHeightChange(e)}}),t}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){this.handleHeightChange()},n.getBodyContainerStyle=function(e){var t="translateY("+this.props.bodyScrollTop/4*-1+"px)";return{WebkitTransform:t,msTransform:t,transform:t,opacity:e}},n.getClassName=function(){var e=this.props.isCloseButtonEnabled;return(0,a.default)({"intercom-home-screen-header":!0,"intercom-home-screen-header-close-button-enabled":e})},n.render=function(){var e,t,r=this,n=this.props,o=n.teamGreeting,a=n.teamIntro,i=n.logoUrl,s=n.bodyScrollTop,l=n.height,c=n.appName,u=(e=s,(t=l)?1-Math.min(Math.abs(e/(t/2)),1):1),d=c+" logo";return p.default.createElement("div",{ref:function(e){return r.node=e},className:this.getClassName()},p.default.createElement(f.default,{currentView:"home-screen",closeButtonClassName:"intercom-home-screen-header-close-button",backButtonClassName:"intercom-home-screen-header-back-button",headerOpacity:u}),p.default.createElement("div",{className:"intercom-home-screen-header-body-container",style:this.getBodyContainerStyle(u)},p.default.createElement("div",{className:"intercom-home-screen-header-body"},i?p.default.createElement("div",{className:"intercom-home-screen-header-logo"},p.default.createElement("img",{src:i,alt:d})):null,o?p.default.createElement("h1",null,p.default.createElement(h.default,{minFontSize:20,maxFontSize:32,onTextFit:this.handleHeightChange},p.default.createElement(m.default,{className:"intercom-home-screen-header-greeting",text:o}))):null,a?p.default.createElement("h2",null,p.default.createElement(m.default,{className:"intercom-home-screen-header-intro",text:a})):null)))},r}(p.PureComponent);t.default=o},1320:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1));(n=r(1058))&&n.__esModule;function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(o){var e,t;function r(){for(var r,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s(i(r=o.call.apply(o,[this].concat(t))||this),"canvas",void 0),s(i(r),"node",void 0),s(i(r),"state",{maxWidth:-1}),s(i(r),"canvas",window.parent.document.createElement("canvas")),s(i(r),"setMaxWidth",function(){var e=i(r).node;if(e){var t=e.getBoundingClientRect().width;r.setState({maxWidth:r.props.maxWidth||t},function(){var e=r.props.onTextFit;e&&setTimeout(function(){return e()},1)})}}),r}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){this.setMaxWidth()},n.getCanvasFontSize=function(){var e=this.canvas.getContext("2d").font.match(/\d+/);return e?e[0]:this.props.minFontSize},n.fitTextSize=function(){if(this.canvas){var e=this.props,t=e.children,r=e.minFontSize,n=e.maxFontSize,o=this.canvas.getContext("2d").measureText(t.props.text),a=this.getCanvasFontSize(),i=Math.floor(parseFloat(a)*parseInt(this.state.maxWidth,10)/o.width);return r<i&&i<n?i:n<=i?n:r}},n.getStyle=function(){return this.state.maxWidth?{fontSize:this.fitTextSize(),maxWidth:this.state.maxWidth}:{}},n.render=function(){var t=this;return a.default.createElement("div",{className:"intercom-fit-text",ref:function(e){return t.node=e},style:this.getStyle()},this.props.children)},r}(a.PureComponent);t.default=o},1321:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),a=(n=r(1077))&&n.__esModule?n:{default:n};var i,s,l,c=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r,n.prototype.render=function(){return o.default.createElement(a.default,{currentView:"empty-screen",closeButtonClassName:"intercom-conversation-header-close-button",isCloseButtonEnabled:this.props.isCloseButtonEnabled,isBackButtonEnabled:!1})},n}(o.PureComponent);t.default=c,l={isCloseButtonEnabled:!0},(s="defaultProps")in(i=c)?Object.defineProperty(i,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[s]=l},1322:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.transitionEnterTimeout=t.transitionExitTimeout=void 0;var c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),a=r(177),u=n(r(1323)),d=n(r(1324)),p=n(r(1326)),f=n(r(1328)),m=n(r(1348)),h=n(r(1350));function n(e){return e&&e.__esModule?e:{default:e}}t.transitionExitTimeout=320;t.transitionEnterTimeout=1850;var o=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var o=n.prototype;return o.getViewKey=function(){var e=this.props,t=e.isBooting,r=e.currentView;return t?"booting":"empty-screen"===r?"empty-screen":"home-screen"===r?"home-screen":"conversations"===r?"conversations":"conversation"===r||"new-conversation"===r||"messenger-trigger"===r?"conversation":void 0},o.renderView=function(){var e=this.props,t=e.isBooting,r=e.isHeaderCollapsed,n=e.headerHeight,o=e.currentView,a=e.appWindow,i=e.frameWindow,s=e.onHeaderCollapse,l=e.onScroll;return t?c.default.createElement(u.default,null):"home-screen"===o?c.default.createElement(f.default,{headerHeight:n,onScroll:l,frameWindow:i}):"empty-screen"===o?c.default.createElement(p.default,null):"conversations"===o?c.default.createElement(m.default,{appWindow:a}):"messenger-trigger"===o?c.default.createElement(d.default,null):c.default.createElement(h.default,{isHeaderCollapsed:r,appWindow:a,frameWindow:i,onHeaderCollapse:s,headerHeight:n||211})},o.render=function(){return c.default.createElement(a.TransitionGroup,{className:"intercom-messenger-body",component:"div",appear:!0,enter:!0,exit:!0},c.default.createElement(a.CSSTransition,{key:this.getViewKey(),classNames:"intercom-messenger-body-view",timeout:{enter:1850,exit:320}},this.renderView()))},n}(c.PureComponent);t.default=o},1323:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mergeProps=t.mapDispatchToProps=t.mapStateToProps=void 0;var n,o=r(42),a=(n=r(872))&&n.__esModule?n:{default:n},l=r(741);var i=r(62),s=r(796).createOrUpdateUser,c=function(e){var t=e.app.bootFailed,r=e.user,n=r.url,o=r.customAttributes,a=r.anonymousSessionDuration,i=e.launcher.launcherEnabledOverride,s=(0,l.customizationSelector)(e);return{bootFailed:t,url:n,customAttributes:o,launcherEnabledOverride:i,anonymousSessionDuration:a,customizationAttributes:{alignment:s.alignment,horizontalPadding:s.horizontalPadding,verticalPadding:s.verticalPadding}}};t.mapStateToProps=c;var u=function(a){return{onRetryClick:function(e,t,r,n,o){a(s(i,null,e,t,r,n,o,!0))}}};t.mapDispatchToProps=u;var d=function(a,i){return Object.assign({},a,i,{onRetryClick:function(){var e=a.url,t=a.customAttributes,r=a.launcherEnabledOverride,n=a.anonymousSessionDuration,o=a.customizationAttributes;i.onRetryClick(e,t,r,n,o)}})};t.mergeProps=d;var p=(0,o.connect)(c,u,d)(a.default);t.default=p},1324:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(97),o=r(42),a=c(r(1325)),i=r(800),s=c(r(62)),l=r(873);function c(e){return e&&e.__esModule?e:{default:e}}var u=(0,o.connect)(function(e){return{failed:(0,l.failedMessengerTriggerSelector)(e)}},function(e){return(0,n.bindActionCreators)({handleTryAgain:i.retryLastTrigger.bind(null,s.default)},e)})(a.default);t.default=u},1325:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=r(177),s=r(43),l=(n=r(134))&&n.__esModule?n:{default:n},c=r(798);var o=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var o=n.prototype;return o.renderError=function(){return a.default.createElement(i.CSSTransition,{classNames:"intercom-booting-body",timeout:{enter:200,exit:200}},a.default.createElement(c.BootingError,null,a.default.createElement(c.BootingErrorHeader,null,(0,s.translate)("something_is_wrong")),a.default.createElement(c.BootingErrorMessage,null,(0,s.translate)("unable_to_load_the_messenger")),a.default.createElement(c.BootingRetryButtonContainer,null,a.default.createElement(c.BootingRetryButton,{onClick:this.props.handleTryAgain},(0,s.translate)("try_again")))))},o.renderLoading=function(){return a.default.createElement(i.CSSTransition,{classNames:"intercom-booting-body",timeout:{enter:200,exit:200}},a.default.createElement(l.default,null))},o.render=function(){var e=this.props.failed;return a.default.createElement(c.BootingWrapper,null,a.default.createElement(i.TransitionGroup,null,e&&this.renderError(),!e&&this.renderLoading()))},n}(a.PureComponent);t.default=o},1326:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(42),o=i(r(1327)),a=i(r(184));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,n.connect)(function(e){return{isIntercomLinkEnabled:e.app.isIntercomLinkEnabled}},function(e){return{handleCloseMessenger:function(){e(a.default.closeMessenger())}}})(o.default);t.default=s},1327:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),a=r(43),i=(n=r(1111))&&n.__esModule?n:{default:n};var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r,n.prototype.render=function(){return o.default.createElement("div",{className:"intercom-empty-screen"},o.default.createElement("div",{className:"intercom-messenger-card-text"},(0,a.translate)("nothing_to_see_here_yet")),o.default.createElement("div",{className:"intercom-messenger-card-text intercom-messenger-card-text-muted"},(0,a.translate)("no_messages_from_the_team")),o.default.createElement(i.default,{className:"intercom-close-button",label:(0,a.translate)("close"),onClick:this.props.handleCloseMessenger}))},n}(o.PureComponent);t.default=s},1328:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapStateToProps=void 0;var n,o=r(42),a=(n=r(1329))&&n.__esModule?n:{default:n};var i=function(e){var t=e.app;return{appName:t.name,isIntercomLinkEnabled:t.isIntercomLinkEnabled}};t.mapStateToProps=i;var s=(0,o.connect)(i)(a.default);t.default=s},1329:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(22)),a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=o(r(14)),s=o(r(1330)),l=r(48);function o(e){return e&&e.__esModule?e:{default:e}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(o){var e,t;function r(){for(var r,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u(c(r=o.call.apply(o,[this].concat(t))||this),"node",void 0),u(c(r),"addViewedHomeScreenMetric",function(){r.context.addMetric("viewed","home-screen","messenger","",{},"m4_metric")}),u(c(r),"handleScroll",function(e){if(r.node){var t=r.node.scrollTop;(0,l.allowScrollEvent)(e),r.props.onScroll(Math.max(0,t))}}),r}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){this.addViewedHomeScreenMetric(),this.props.onScroll(0)},n.getBodyStyle=function(){var e=this.props.headerHeight;if(e)return{paddingTop:e-64}},n.getClassName=function(){return(0,i.default)({"intercom-home-screen-body":!0,"intercom-home-screen-body-improved-link":this.props.isIntercomLinkEnabled})},n.render=function(){var t=this,e=this.props.frameWindow;return a.default.createElement("div",{ref:function(e){return t.node=e},className:"intercom-home-screen",onWheel:this.handleScroll,onTouchMove:this.handleScroll,onScroll:this.handleScroll},a.default.createElement("div",{className:this.getClassName(),style:this.getBodyStyle()},a.default.createElement("div",{className:"intercom-home-screen-cards-container"},a.default.createElement(s.default,{frameWindow:e}))))},r}(a.PureComponent);(t.default=d).contextTypes={addMetric:n.default.func}},1330:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapDispatchToProps=t.mapStateToProps=void 0;var n=r(42),o=l(r(1331)),i=r(133),a=r(1347),s=l(r(62));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.user,r=t.homeScreenCardCount,n=t.hasConversations,o=e.homeScreen,a=o.cardUris;return{isFetched:o.isFetched,isFailed:o.isFailed,cardCount:r,cardUris:a,showConversationCard:(0,i.allowNewConversationSelector)(e).allowNewConversation||n}};t.mapStateToProps=c;var u=function(e){return{fetchCards:function(){e((0,a.getHomeScreenCards)(s.default))}}};t.mapDispatchToProps=u;var d=(0,n.connect)(c,u)(o.default);t.default=d},1331:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),c=n(r(1332)),u=n(r(1134)),d=n(r(1346));function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var o=n.prototype;return o.componentDidMount=function(){var e=this.props,t=e.isFetched,r=e.isFailed,n=e.fetchCards;t||r||n()},o.render=function(){var e=this.props,t=e.cardCount,r=e.showConversationCard,n=e.isFailed,o=e.isFetched,a=e.frameWindow,i=e.fetchCards,s=this.props.cardUris||Array(t).fill(void 0);return l.default.createElement("div",{className:"intercom-home-screen-cards"},r?l.default.createElement(c.default,null):null,l.default.createElement(d.default,{handleFetchCards:i,visible:n}),s.map(function(e,t){return l.default.createElement(u.default,{key:t,cardUri:e,index:t,isFetched:o,isFailed:n,frameWindow:a})}))},n}(l.PureComponent);t.default=o},1332:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapStateToProps=void 0;var n=r(42),o=r(33),a=l(r(1130)),i=r(133),u=l(r(443)),s=l(r(1333)),d=l(r(1345));function l(e){return e&&e.__esModule?e:{default:e}}var p=(0,o.createSelector)(a.default,i.allowNewConversationSelector,function(e){return e.homeScreen.isFetched},function(e){return e.homeScreen.isFailed},function(e,t,r,n){return{recentConversations:e.recentConversations,allowNewConversation:t.allowNewConversation,isFetched:r,isFailed:n}}),c=function(e){var t=(0,u.default)(e),r=0<(0,d.default)(e),n=p(e),o=n.recentConversations,a=n.allowNewConversation,i=n.isFetched,s=n.isFailed,l=a?o:t;l=(l=l.filter(function(e){return"disabled"!==e.parts[0].replyType})).slice(0,3);var c=e.homeScreen.hasMoreConversations;return t.length>l.length&&(c=!0),{recentConversations:l,hasMoreConversations:c,hasMoreUnreadConversations:r,allowNewConversation:a,isFetchedOrFailed:i||s}};t.mapStateToProps=c;var f=(0,n.connect)(c)(s.default);t.default=f},1333:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=n(r(1334)),s=n(r(1340)),l=n(r(731)),c=n(r(134)),u=n(r(1344));function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var o=n.prototype;return o.renderSpinner=function(){return a.default.createElement("div",{className:"intercom-home-screen-card-spinner-container",key:"spinner"},a.default.createElement(c.default,null))},o.renderBody=function(){var e=this.props,t=e.recentConversations,r=e.hasMoreConversations,n=e.hasMoreUnreadConversations,o=e.allowNewConversation;return 0<t.length||!o?a.default.createElement(s.default,{key:"conversations-body",conversations:t,hasMoreConversations:r,hasMoreUnreadConversations:n,allowNewConversation:o}):a.default.createElement(i.default,{key:"start-conversation-body",hasMoreConversations:r,hasMoreUnreadConversations:n})},o.render=function(){var t=this,e=this.props.isFetchedOrFailed;return a.default.createElement(u.default,{delay:800,appear:e},function(e){return a.default.createElement("div",{className:"intercom-home-screen-card intercom-home-screen-conversation-card"},a.default.createElement(l.default,{transitionName:"intercom-home-screen-conversation-card-body",transitionEnterTimeout:900,transitionLeaveTimeout:300},e?t.renderBody():t.renderSpinner()))})},n}(a.PureComponent);t.default=o},1334:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapStateToProps=l,t.default=t.mapDispatchToProps=void 0;var n,o=r(42),a=(n=r(1335))&&n.__esModule?n:{default:n},i=r(184),s=r(133);function l(e){var t=e.app,r=t.officeHoursResponse,n=t.expectedResponseDelay;return{outOfOffice:void 0!==r,responseDelayMessage:r||n,shouldShowUpfrontEmailComposer:(0,s.shouldShowUpfrontEmailSelector)(e)}}var c=function(e){return{onShowConversationsClick:function(){return e((0,i.showConversations)())},onShowNewConversationsClick:function(){return e((0,i.showNewConversation)())}}};t.mapDispatchToProps=c;var u=(0,o.connect)(l,c)(a.default);t.default=u},1335:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=n(r(1093)),s=n(r(1131)),l=n(r(1337)),c=r(43),u=n(r(732)),d=n(r(1129)),p=n(r(1132));function n(e){return e&&e.__esModule?e:{default:e}}var o,f,m,h=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var o=n.prototype;return o.renderSeeAllLink=function(){var e=this.props,t=e.hasMoreUnreadConversations,r=e.onShowConversationsClick;return a.default.createElement(p.default,{onClick:r,showMore:t,linkText:(0,c.translate)("see_past_conversations")})},o.renderStartConversationButton=function(){var e=this.props,t=e.shouldShowUpfrontEmailComposer,r=e.onShowNewConversationsClick;return t?a.default.createElement(s.default,{onClick:r,currentView:"home-screen"}):a.default.createElement(i.default,{onClick:r,currentView:"home-screen"})},o.renderStartConversationHeaderText=function(){var e=this.props.shouldShowUpfrontEmailComposer?(0,c.translate)("leave_us_a_message"):(0,c.translate)("start_a_conversation");return a.default.createElement(u.default,{style:"header",bottomMargin:"none",text:e})},o.render=function(){var e=this.props,t=e.responseDelayMessage,r=e.hasMoreConversations,n=e.outOfOffice;return a.default.createElement("div",{className:"intercom-home-screen-card-content intercom-home-screen-start-conversation-card"},this.renderStartConversationHeaderText(),a.default.createElement("div",{className:"intercom-home-screen-start-conversation-card-message"},n?a.default.createElement(d.default,null):null,a.default.createElement(u.default,{style:"muted",text:t})),a.default.createElement("div",{className:"intercom-home-screen-start-conversation-card-content"},a.default.createElement(l.default,{showTooltip:!0}),this.renderStartConversationButton(),r?this.renderSeeAllLink():null))},n}(a.PureComponent);t.default=h,m={allowNewConversation:!0},(f="defaultProps")in(o=h)?Object.defineProperty(o,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):o[f]=m},1336:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o.default.createElement("svg",{className:"intercom-new-conversation-icon",viewBox:"0 0 15 16"},o.default.createElement("g",{transform:"translate(-24.000000, -12.000000)"},o.default.createElement("path",{d:"M25.4036262,27.3409362 C24.4176893,27.8509036 23.8195834,27.3951055 24.0683403,26.3201996 L25.0887779,21.910776 C25.2131242,21.3734618 25.7510472,20.8884231 26.3078778,20.8254187 L32.503417,20.1244045 C34.151155,19.9379658 34.1569707,19.6389088 32.503417,19.4549971 L26.3078778,18.7659164 C25.7589338,18.7048617 25.2129433,18.217839 25.0887779,17.6798715 L24.0683403,13.2586546 C23.8198614,12.1820783 24.408944,11.7182276 25.4036262,12.2327184 L38.22304,18.8634497 C39.208977,19.373417 39.2177223,20.1957141 38.22304,20.7102049 L25.4036262,27.3409362 Z"})))};var n,o=(n=r(1))&&n.__esModule?n:{default:n}},1337:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapStateToProps=i,t.default=void 0;var n,o=r(42),a=(n=r(1338))&&n.__esModule?n:{default:n};function i(e){return{admins:e.app.activeAdmins}}var s=(0,o.connect)(i)(a.default);t.default=s},1338:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=n(r(856)),s=r(861),l=n(r(1339)),c=r(43);function n(e){return e&&e.__esModule?e:{default:e}}var o,u,d,p=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var o=n.prototype;return o.renderAvatarWithTooltip=function(e){var t=e.firstName||"";return a.default.createElement(l.default,{content:t,ariaLabel:(0,c.translate)("show_admin_name")},a.default.createElement(i.default,{admin:e}))},o.renderAdminAvatars=function(){var r=this,e=this.props,t=e.admins,n=e.maxAdmins,o=e.showTooltip;return(0,s.sortByAvatar)(t,n,!0).map(function(e,t){return a.default.createElement("div",{key:t,className:"intercom-admin-avatar-stack-avatar"},o?r.renderAvatarWithTooltip(e):a.default.createElement(i.default,{admin:e}))})},o.render=function(){return a.default.createElement("div",{className:"intercom-admin-avatar-stack"},this.renderAdminAvatars())},n}(a.PureComponent);t.default=p,d={maxAdmins:6,showTooltip:!(u="defaultProps")},u in(o=p)?Object.defineProperty(o,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[u]=d},1339:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),s=r(177),a=(n=r(14))&&n.__esModule?n:{default:n};function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(o){var e,t;function r(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return c(l(e=o.call.apply(o,[this].concat(r))||this),"hoverTimeout",void 0),c(l(e),"tooltipShowTimeout",void 0),c(l(e),"state",{isHovering:!1}),c(l(e),"handleMouseEnter",function(){e.setHoverTimeout()}),c(l(e),"handleMouseLeave",function(){e.setState({isHovering:!1}),e.clearTimeouts()}),c(l(e),"handleKeyDown",function(){e.clearTimeouts(),e.setHoverTimeout(),e.tooltipShowTimeout=setTimeout(function(){e.setState({isHovering:!1})},1200)}),e}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.setHoverTimeout=function(){var e=this;this.hoverTimeout=setTimeout(function(){e.setState({isHovering:!0})},200)},n.componentWillUnmount=function(){this.clearTimeouts()},n.clearTimeouts=function(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=null),this.tooltipShowTimeout&&(clearTimeout(this.tooltipShowTimeout),this.tooltipShowTimeout=null)},n.getClassNames=function(){var e,t=this.props.className?""+this.props.className:"";return(0,a.default)(((e={"intercom-tooltip":!0})[t]=!!this.props.className,e))},n.render=function(){var t=this,e=this.props,r=e.children,n=e.content,o=e.ariaLabel,a=this.state.isHovering;return i.default.createElement("div",{className:"intercom-tooltip-wrapper",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,tabIndex:0,onClick:t.handleKeyDown,"aria-label":o,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleKeyDown(e)},role:"button"},r,i.default.createElement(s.CSSTransition,{classNames:"intercom-tooltip",mountOnEnter:!0,unmountOnExit:!0,timeout:100,in:a},i.default.createElement("div",{key:"intercom-tooltip",className:this.getClassNames()},i.default.createElement("div",{className:"intercom-tooltip-content"},n))))},r}(i.Component);t.default=o},1340:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapDispatchToProps=t.mapStateToProps=void 0;var n=r(42),o=r(183),a=r(184),i=c(r(62)),s=c(r(1341)),l=r(133);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=(0,l.shouldShowUpfrontEmailSelector)(e);return{appColor:e.app.color,appName:e.app.name,appAdmins:e.app.activeAdmins,userId:e.user.id,shouldShowUpfrontEmailComposer:t}};t.mapStateToProps=u;var d=function(t){return{onOpenConversation:function(e){t((0,a.showConversation)(e)),t((0,o.getConversation)(i.default,e))},onOpenConversations:function(e){e.preventDefault(),t((0,a.showConversations)())},onShowNewConversationsClick:function(){t((0,a.showNewConversation)())}}};t.mapDispatchToProps=d;var p=(0,n.connect)(u,d)(s.default);t.default=p},1341:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),n=o(r(22)),a=o(r(14)),s=o(r(1133)),l=o(r(1093)),c=o(r(1131)),u=r(43),d=o(r(732)),p=o(r(1132)),f=o(r(134));function o(e){return e&&e.__esModule?e:{default:e}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(o){var e,t;function r(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return h(m(t=o.call.apply(o,[this].concat(r))||this),"handleOpenConversationClick",function(e){t.addOpenConversationMetric(),t.props.onOpenConversation(e)}),h(m(t),"addOpenConversationMetric",function(){t.context.addMetric("clicked","conversation","messenger","home-screen",{},"m4_metric")}),t}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.renderConversationsCard=function(){return i.default.createElement("div",{className:"intercom-home-screen-card-content intercom-home-screen-conversations"},this.renderConversationsBody())},n.getConversationBodyClassNames=function(){var e=this.context.isPrimaryColorLight;return(0,a.default)({"intercom-home-screen-conversation-body":!0,"intercom-home-screen-conversation-body-light":e()})},n.renderConversationsBody=function(){var r=this,e=this.props,t=e.conversations,n=e.hasMoreConversations,o=e.hasMoreUnreadConversations,a=e.onOpenConversations;return i.default.createElement("div",{className:this.getConversationBodyClassNames()},i.default.createElement("div",{className:"intercom-home-screen-conversations-title"},i.default.createElement(d.default,{style:"header",bottomMargin:"none",text:(0,u.translate)("your_conversations")}),n?i.default.createElement(p.default,{onClick:a,linkText:(0,u.translate)("see_all"),showMore:o}):null),i.default.createElement("div",null,t.map(function(e,t){return r.renderConversationItem(t,e)})),this.renderConversationsFooter())},n.renderSpinner=function(e){return i.default.createElement("div",{className:"intercom-conversation-summary intercom-home-screen-card-spinner-conversation",key:"spinner-conversation-"+e},i.default.createElement(f.default,null))},n.renderConversationItem=function(e,t){var r=this.props,n=r.appName,o=r.appAdmins,a=r.userId;return"saving"===t.parts[0].saveState?this.renderSpinner(e):i.default.createElement(s.default,{key:e,conversation:t,appName:n,appAdmins:o,userId:a,onClick:this.handleOpenConversationClick})},n.renderButton=function(){var e=this.props,t=e.shouldShowUpfrontEmailComposer,r=e.onShowNewConversationsClick;return e.allowNewConversation?t?i.default.createElement(c.default,{onClick:r,variant:"secondary",currentView:"home-screen"}):i.default.createElement(l.default,{onClick:r,variant:"secondary",currentView:"home-screen"}):null},n.renderConversationsFooter=function(){return i.default.createElement("div",{className:"intercom-home-screen-conversations-footer"},this.renderButton())},n.render=function(){return 0<this.props.conversations.length?this.renderConversationsCard():null},r}(i.PureComponent);h(t.default=v,"contextTypes",{addMetric:n.default.func,isPrimaryColorLight:n.default.func}),h(v,"defaultProps",{allowNewConversation:!0})},1342:function(e,t,r){"use strict";var n=r(1343);e.exports=function(e,t,r){return!n(e.props,t)||!n(e.state,r)}},1343:function(e,t,r){"use strict";var a=Object.prototype.hasOwnProperty;function i(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}e.exports=function(e,t){if(i(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=0;o<r.length;o++)if(!a.call(t,r[o])||!i(e[r[o]],t[r[o]]))return!1;return!0}},1344:function(e,t,r){"use strict";function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(o){var e,t;function r(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return i(a(e=o.call.apply(o,[this].concat(r))||this),"state",{isAppearing:!0,haveAppeared:e.props.appear}),i(a(e),"isAppearingTimeout",void 0),e}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){var e=this,t=this.props.delay;this.isAppearingTimeout=setTimeout(function(){e.setState({isAppearing:!1})},t)},n.componentWillUnmount=function(){clearTimeout(this.isAppearingTimeout)},n.render=function(){var e=this.state,t=e.isAppearing,r=e.haveAppeared,n=this.props,o=n.appear;return(0,n.children)((r||!t)&&o)},r}(r(1).PureComponent);t.default=n},1345:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(33),a=r(444),i=(n=r(1130))&&n.__esModule?n:{default:n};var s=(0,o.createSelector)(a.unreadConversationCountSelector,i.default,function(e,t){return e-t.recentConversations.slice(0,3).filter(function(e){return(0,a.isUnread)(e)}).length});t.default=s},1346:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),a=r(177),i=r(43),s=(n=r(733))&&n.__esModule?n:{default:n},l=r(1134);var c=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r,n.prototype.render=function(){var t=this,e=this.props.visible;return o.default.createElement(a.TransitionGroup,{component:"div",appear:!0,enter:!0,exit:!0},e?o.default.createElement(a.CSSTransition,{classNames:"intercom-messenger-card-error-animation",timeout:{enter:l.TRANSITION_DURATION,exit:300}},o.default.createElement("div",{className:"intercom-messenger-card-error intercom-messenger-cards-error intercom-messenger-card-error-inline"},o.default.createElement(s.default,null),o.default.createElement("span",{className:"intercom-messenger-card-error-copy"},(0,i.translate)("couldnt_load_apps")),o.default.createElement("span",{className:"try-again",onClick:t.props.handleFetchCards,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.props.handleFetchCards(e)},role:"button",tabIndex:"0"},(0,i.translate)("try_again")))):null)},n}(o.PureComponent);t.default=c},1347:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHomeScreenCards=void 0;var o=r(136),a=r(452);t.getHomeScreenCards=function(n){return function(r,e){r(i());var t=e().session;return n.getHomeScreenCards(t).then(function(e){if(r((0,a.setDismissedPointers)(e)),!1===e.cardsSuccess)r(l(e.conversations)),r(c("Couldn't load apps"));else{var t=e.cards||e;t.forEach(function(e){return r((0,o.getCardContent)(n,e))}),r(s(t.map(function(e){return e.uri}),e.conversations,e.hasMoreConversations))}}).catch(function(e){r(c(e))})}};var i=function(){return{type:"GET_HOME_SCREEN_CARDS_REQUEST"}},s=function(e,t,r){return{type:"GET_HOME_SCREEN_CARDS_SUCCESS",cardUris:e,conversations:t,hasMoreConversations:r}},l=function(e){return{type:"GET_HOME_SCREEN_CONVERSATIONS_SUCCESS",conversations:e}},c=function(e){return{type:"GET_HOME_SCREEN_CARDS_FAILURE",error:e}}},1348:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mergeProps=t.mapDispatchToProps=t.mapStateToProps=void 0;var n=r(42),o=c(r(62)),a=c(r(1349)),m=c(r(443)),i=r(452),s=r(183),l=r(184);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.app,r=t.name,n=t.features,o=t.activeAdmins,a=t.inboundConversationsDisabled,i=e.user,s=i.role,l=i.id,c=e.conversations,u=c.isFetching,d=c.pagesFetched,p=c.totalPages,f=c.scrollPosition;return{appName:r,appFeatures:n,appAdmins:o,inboundConversationsDisabled:a,userRole:s,userId:l,conversations:{all:(0,m.default)(e),isFetching:u,pagesFetched:d,totalPages:p,scrollPosition:f}}};t.mapStateToProps=u;var d=function(r){return{onConversationsPage:function(e,t){r((0,i.getConversations)(o.default,"onConversationsPage",e,t))},onConversationClick:function(e){r((0,l.showConversation)(e)),r((0,s.getConversation)(o.default,e))},onNewConversationClick:function(){r((0,l.showNewConversation)())},onConversationsScroll:function(e){r((0,i.conversationsScrolled)(e))}}};t.mapDispatchToProps=d;var p=function(e,t,r){return Object.assign({},e,t,r,{onConversationClick:function(e){t.onConversationClick(e)}})};t.mergeProps=p;var f=(0,n.connect)(u,d,p)(a.default);t.default=f},1349:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(22)),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),l=o(r(1133)),a=r(48),i=r(1075),c=r(43),u=o(r(134)),d=o(r(1093));function o(e){return e&&e.__esModule?e:{default:e}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(o){var e,t;function r(){for(var n,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return f(p(n=o.call.apply(o,[this].concat(t))||this),"addViewedConversationListMetric",function(){n.context.addMetric("viewed","conversation_list","messenger","",{})}),f(p(n),"addConversationClickMetric",function(e){n.context.addMetric("clicked",e?"conversation":"new_conversation","messenger","from_conversation_list",{conversation_id:e})}),f(p(n),"handleConversationClick",function(e){n.addConversationClickMetric(e),n.props.onConversationClick(e)}),f(p(n),"handleScrollEnd",(0,i.debounceEventHandler)(function(e){var t=n.props,r=t.onConversationsPage;((0,t.onConversationsScroll)(e.target.scrollTop),n.shouldPageConversations())&&r(n.props.conversations.pagesFetched+1,10)},200)),n}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){this.props.onConversationsPage(1,10),this.conversations.scrollTop=this.props.conversations.scrollPosition,this.addViewedConversationListMetric()},n.shouldShowNewMessageButton=function(){var e=this.props,t=e.userRole,r=e.appFeatures;return!e.inboundConversationsDisabled&&("user"===t?r.inboundMessages:r.anonymousInboundMessages)},n.shouldPageConversations=function(){var e=this.props.conversations,t=e.pagesFetched,r=e.totalPages;return!e.isFetching&&t<r&&.5<(0,a.getScrollPosition)(this.conversations)},n.getSortedConversations=function(){var e=[].concat(this.props.conversations.all);return(e=e.filter(function(e){return"disabled"!==e.parts[0].replyType})).sort(function(e,t){return t.lastPartCreatedAt-e.lastPartCreatedAt})},n.renderLoading=function(){return s.default.createElement(u.default,null)},n.renderConversations=function(){var r=this,e=this.getSortedConversations(),t=this.props,n=t.appName,o=t.appAdmins,a=t.userId,i=this.props.conversations.scrollPosition;return s.default.createElement("div",{className:"intercom-conversations-body-conversations"},e.map(function(e,t){return s.default.createElement(l.default,{rowIndex:t-parseInt(i/102),key:t,conversation:e,appName:n,appAdmins:o,userId:a,onClick:r.handleConversationClick})}))},n.renderEmpty=function(){return s.default.createElement("div",{className:"intercom-conversations-body-empty"},s.default.createElement("div",{className:"intercom-conversations-body-empty-text-container"},s.default.createElement("div",{className:"intercom-conversations-body-empty-header"},(0,c.translate)("no_conversations")),s.default.createElement("div",{className:"intercom-conversations-body-empty-text"},(0,c.translate)("empty_conversations",{name:this.props.appName}))))},n.renderBody=function(){var e=this.props.conversations,t=e.isFetching,r=e.pagesFetched;return t&&!r?this.renderLoading():0===this.props.conversations.all.length?this.renderEmpty():this.renderConversations()},n.render=function(){var t=this,e=this.props.onNewConversationClick;return s.default.createElement("div",{className:"intercom-conversations"},s.default.createElement("div",{ref:function(e){return t.conversations=e},className:"intercom-conversations-body",onScroll:this.handleScrollEnd,onWheel:a.allowScrollEvent},this.renderBody()),s.default.createElement("div",{className:"intercom-conversations-footer"},this.shouldShowNewMessageButton()?s.default.createElement(d.default,{onClick:e,variant:"fixed",currentView:"from_conversation_list"}):null))},r}(s.Component);(t.default=m).propTypes={conversations:n.default.shape({all:n.default.arrayOf(n.default.shape({lastPartCreatedAt:n.default.instanceOf(Date).isRequired})).isRequired,totalPages:n.default.number,pagesFetched:n.default.number,isFetching:n.default.bool,scrollPosition:n.default.number}).isRequired,appName:n.default.string.isRequired,appAdmins:n.default.arrayOf(n.default.object).isRequired,appFeatures:n.default.object,inboundConversationsDisabled:n.default.bool,userRole:n.default.oneOf(["user","lead","visitor"]).isRequired,userId:n.default.string.isRequired,onConversationsPage:n.default.func,onConversationClick:n.default.func,onNewConversationClick:n.default.func,onConversationsScroll:n.default.func.isRequired},m.contextTypes={addMetric:n.default.func.isRequired}},1350:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mergeProps=t.mapDispatchToProps=t.mapStateToProps=void 0;var n=r(42),i=r(1112),o=r(1351),m=r(423),h=r(133),s=r(1359),l=r(62),a=r(421).generateUUID,c=r(183),u=c.createPart,d=c.markConversationAsRead,p=c.createReaction,f=r(1087).openArticle,v=function(e){var t=e.app,r=t.userConversationAttachmentsEnabled,n=t.userConversationGifsEnabled,o=e.user.isPresent,a=(0,m.currentConversationSelector)(e),i=e.app&&e.app.officeHoursResponse,s=e.borderless,l=a.lastParticipatingAdmin,c=(0,h.shouldShowUpfrontEmailSelector)(e),u=e.composerSuggestions,d=u&&u.suggestions&&0<u.suggestions.length,p=!a.id,f=!a.userParticipated;return{conversation:a,userIsPresent:o,officeHoursResponse:i,isBorderless:s,lastParticipatingAdmin:l,uploadsEnabled:r,gifsEnabled:n,shouldShowComposerSuggestions:d&&p&&f,shouldShowUpfrontEmailComposer:c,composerSuggestions:u}};t.mapStateToProps=v;var g=function(a){return{onArticleCardClick:function(e,t){a(f(l,e,t))},onConversationRead:function(e){a(d(l,e))},onRetry:function(e,t){if(t.selectedReplyOption){var r=t.selectedReplyOption,n=r.quickReplyPart,o=r.replyOption;a((0,i.quickReply)(l,e,n,o,t,!0))}else t.composerSuggestionItem?a((0,s.triggerFromSuggestion)(l,t.composerSuggestionItem,!0)):a(u(l,e,t,!0))},onReactionSelect:function(e,t){a(p(l,e,t,!0))},onAttachmentSubmit:function(e,t,r,n,o){void 0===o&&(o=new Date),a(u(l,e,{clientId:t,createdAt:o,body:r,file:n}))},onComposerSuggestionClicked:function(e){a((0,s.triggerFromSuggestion)(l,e,!1))}}};t.mapDispatchToProps=g;var y=function(e,r,t){var n=e.conversation.id,o={onConversationRead:function(){r.onConversationRead(n)},onAttachmentSubmit:function(e,t){r.onAttachmentSubmit(n,a(),e,t)},onRetry:function(e){r.onRetry(n,e)},onReactionSelect:function(e){r.onReactionSelect(n,e)}};return Object.assign({},t,e,r,o)};t.mergeProps=y;var b=(0,n.connect)(v,g,y)(o.IndexedConversation);t.default=b},1351:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedConversation=t.default=void 0;var n=h(r(22)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),a=h(r(14)),d=h(r(1352)),l=h(r(1356)),i=h(r(1357)),o=h(r(1122)),s=r(1089),p=r(462),c=r(1358),f=r(59),m=r(724);function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(o){var e,t;function r(){for(var n,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return g(v(n=o.call.apply(o,[this].concat(t))||this),"state",{isEmojiPickerOpen:!1,isGifPickerOpen:!1,footerHeight:0}),g(v(n),"addConversationOpenedMetric",function(){var e=n.props.conversation.id;n.context.addMetric("viewed",e?"conversation":"new_conversation","messenger","",{conversation_id:e})}),g(v(n),"handleEmojiPickerToggle",function(){n.setState({isEmojiPickerOpen:!n.state.isEmojiPickerOpen})}),g(v(n),"handleGifPickerToggle",function(){n.setState({isGifPickerOpen:!n.state.isGifPickerOpen})}),g(v(n),"handlePaste",function(e){n.handleFileSubmit((0,c.getFilesFromPasteEvent)(e))}),g(v(n),"handleDragOver",function(e){e.stopPropagation(),e.preventDefault()}),g(v(n),"handleDrop",function(e){e.stopPropagation(),e.preventDefault(),n.handleFileSubmit((0,c.getFilesFromDropEvent)(e))}),g(v(n),"handleFooterHeightChange",function(e){e!==n.state.footerHeight&&n.setState({footerHeight:e})}),g(v(n),"handleReactionSelect",function(e){n.props.onReactionSelect(e)}),g(v(n),"handleClick",function(){var e=n.state,t=e.isEmojiPickerOpen,r=e.isGifPickerOpen;t?n.setState({isEmojiPickerOpen:!1}):r&&n.setState({isGifPickerOpen:!1})}),n}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){var e=this.props,t=e.conversation,r=e.userIsPresent;!t.read&&r&&this.handleConversationRead(),this.addConversationOpenedMetric()},n.addReplyMetric=function(e){var t=(0,f.getLastAdminPart)(e);(0,f.isOperatorReply)(t)?this.addOperatorReplyMetric(e,t):this.addAdminReplyMetric(e,t)},n.addAdminReplyMetric=function(e,t){this.context.addMetric("received","reply","messenger","in_conversation",{conversation_id:e.id,part_id:t.id})},n.addOperatorReplyMetric=function(e,t){this.context.addMetric("received","operator_reply","messenger","in_conversation",{conversation_id:e.id,part_id:t.id,type:(0,f.getMessageType)(t)})},n.componentDidUpdate=function(e){var t=e.conversation;this.shouldMarkConversationAsRead(e)&&this.handleConversationRead(),"all"===t.fetchState&&(0,f.getAdminPartCount)(t)<(0,f.getAdminPartCount)(this.props.conversation)&&this.addReplyMetric(this.props.conversation)},n.handleFileSubmit=function(e){if(!this.isComposerDisabled()&&this.props.uploadsEnabled){var l=this.props.onAttachmentSubmit;if(e&&0!==e.length){var c=e[0];(0,s.rotateImageAndGetPreview)(c).then(function(e){if(e){var t=e.width,r=e.height,n=e.src,o=(0,p.getFileFromBytes)(e.src,c.name,c.type);l((0,m.createBlocksForImage)(n,t,r),o)}else{var a=c.name,i=c.type,s=c.size;l((0,m.createBlocksForAttachment)(a,i,s),c)}})}}},n.handleConversationRead=function(){this.props.onConversationRead()},n.isComposerDisabled=function(){var e=this.props.conversation.parts;if(0===e.length)return!1;var t=e[0].saveState;return"saving"===t||"failed"===t},n.shouldMarkConversationAsRead=function(e){if(!this.props.userIsPresent)return!1;var t=e.conversation,r=e.userIsPresent;return t.read&&!this.props.conversation.read||!t.read&&!r},n.shouldShowFooter=function(){var e=this.props.conversation;if(!e.composerState.visible)return!1;var t=(0,f.getLastAdminPart)(e);return!(t&&"attribute_collector"===t.replyType&&void 0===t.form.attributes.find(function(e){var t=e.value;return null!=t}))},n.getClassName=function(){var e=this.props.conversation,t=e.isFetching,r=e.isUpdating;return(0,a.default)({"intercom-conversation":!0,"intercom-conversation-fetching":t&&!r})},n.renderBody=function(){var e=this.props,t=e.frameWindow,r=e.conversation,n=e.isHeaderCollapsed,o=e.onArticleCardClick,a=e.onRetry,i=e.onHeaderCollapse,s=e.composerSuggestions,l=e.shouldShowComposerSuggestions,c=e.onComposerSuggestionClicked;return u.default.createElement(d.default,{conversation:r,composerSuggestions:s,isHeaderCollapsed:n,composerHeight:this.state.footerHeight,frameWindow:t,onArticleCardClick:o,onReactionSelect:this.handleReactionSelect,onRetry:a,onHeaderCollapse:i,shouldShowComposerSuggestions:l,onComposerSuggestionClicked:c})},n.renderFooter=function(){var e=this.props,t=e.appWindow,r=e.frameWindow,n=e.conversation,o=e.onHeaderCollapse,a=e.shouldShowUpfrontEmailComposer,i=e.headerHeight,s=e.shouldShowComposerSuggestions;return u.default.createElement(l.default,{conversation:n,appWindow:t,frameWindow:r,showEmojiPicker:this.state.isEmojiPickerOpen,showGifPicker:this.state.isGifPickerOpen,onHeightChange:this.handleFooterHeightChange,onEmojiPickerToggle:this.handleEmojiPickerToggle,onGifPickerToggle:this.handleGifPickerToggle,onReactionSelect:this.handleReactionSelect,onHeaderCollapse:o,shouldShowUpfrontEmailComposer:a,headerHeight:i,shouldShowComposerSuggestions:s})},n.render=function(){return u.default.createElement(i.default,null,u.default.createElement("div",{className:this.getClassName(),onPaste:this.handlePaste,onDragOver:this.handleDragOver,onDrop:this.handleDrop,onClick:this.handleClick,tabIndex:"-1",role:"presentation"},this.renderBody(),this.shouldShowFooter()?this.renderFooter():null))},r}(u.Component);(t.default=y).propTypes={conversation:n.default.shape({id:n.default.string,parts:n.default.arrayOf(n.default.shape({saveState:n.default.oneOf(["saved","saving","failed"])})).isRequired,read:n.default.bool.isRequired,fetchState:n.default.oneOf(["summary","partial","all"]),isFetching:n.default.bool.isRequired,isUpdating:n.default.bool.isRequired,composerState:n.default.shape({visible:n.default.bool.isRequired}).isRequired}).isRequired,composerSuggestions:n.default.shape({prompt:n.default.any,suggestions:n.default.arrayOf(n.default.shape({uuid:n.default.string.isRequired,text:n.default.string.isRequired,preAction:n.default.string}))}),appWindow:n.default.any.isRequired,frameWindow:n.default.any.isRequired,userIsPresent:n.default.bool.isRequired,userSuppliedEmail:n.default.string,role:n.default.string,shouldShowUpfrontEmailComposer:n.default.bool,isHeaderCollapsed:n.default.bool,uploadsEnabled:n.default.bool,onReactionSelect:n.default.func.isRequired,onConversationRead:n.default.func.isRequired,onArticleCardClick:n.default.func,onRetry:n.default.func.isRequired,onAttachmentSubmit:n.default.func.isRequired,onHeaderCollapse:n.default.func.isRequired,headerHeight:n.default.number,shouldShowComposerSuggestions:n.default.bool,onComposerSuggestionClicked:n.default.func},y.contextTypes={addMetric:n.default.func,messengerOptions:n.default.object};var b=(0,o.default)(y);t.IndexedConversation=b},1352:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapStateToProps=void 0;var n,o=r(42),a=(n=r(1353))&&n.__esModule?n:{default:n};var i=function(e){var t=e.app;return{appName:t.name,isIntercomLinkEnabled:t.isIntercomLinkEnabled}};t.mapStateToProps=i;var s=(0,o.connect)(i)(a.default);t.default=s},1353:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(22)),p=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),f=o(r(1114)),a=o(r(1086)),i=o(r(134)),s=r(48),l=r(177),c=o(r(1135)),u=o(r(1354));function o(e){return e&&e.__esModule?e:{default:e}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(n){var e,t;function r(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m(d(o=n.call.apply(n,[this].concat(t))||this),"partsRef",void 0),m(d(o),"firstUnreadPartRef",void 0),m(d(o),"state",{scrolledToBottom:!1,partsHeight:0}),m(d(o),"scrollToFirstUnreadPartOrBottom",function(){var e=d(o),t=e.partsRef,r=e.firstUnreadPartRef;if(!(o.props.conversation.parts.length<=1))return r?(0,s.scrollToPosition)(t,r.offsetTop-10):void o.scrollToBottom()}),m(d(o),"handleScroll",function(){var e=d(o).partsRef;e&&o.setState({scrolledToBottom:(0,s.isScrolledToOffset)(e,0)})}),m(d(o),"handleWheel",function(e){var t=d(o).partsRef;if(t){var r=t.scrollTop,n=e.deltaY;(o.props.isHeaderCollapsed&&0<=r&&0<n||0<r&&n<0)&&e.stopPropagation()}}),m(d(o),"handlePartsLengthChange",function(){var e=d(o).partsRef;if(e){var t=o.props,r=t.isHeaderCollapsed,n=t.onHeaderCollapse;!r&&(0,s.isScrollable)(e)&&n(),o.scrollToBottom()}}),m(d(o),"handlePartsHeightChange",function(){if(o.partsRef){var e=o.partsRef.clientHeight;o.setState({partsHeight:e})}}),m(d(o),"handleHeaderExpand",function(){o.scrollToTop()}),m(d(o),"setPartsRef",function(e){o.partsRef=e}),m(d(o),"setUnreadPartRef",function(e,t){var r=o.props.conversation.readAt;!o.firstUnreadPartRef&&r&&r<t.createdAt&&(o.firstUnreadPartRef=e)}),o}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.componentDidMount=function(){var e=this.props,t=e.conversation,r=e.onHeaderCollapse;void 0!==t.id&&r(),this.handlePartsHeightChange(),this.scrollToFirstUnreadPartOrBottom()},o.componentDidUpdate=function(e){this.didFetchingEnd(e)&&this.scrollToFirstUnreadPartOrBottom(),this.didPartsLengthChange(e)&&this.handlePartsLengthChange(),this.didHeaderExpand(e)&&this.handleHeaderExpand()},o.didFetchingEnd=function(e){var t=this.props.conversation,r=t.isFetching,n=t.isUpdating;return e.conversation.isFetching&&!e.conversation.isUpdating&&!r&&!n},o.didPartsLengthChange=function(e){return e.conversation.parts.length!==this.props.conversation.parts.length},o.didHeaderExpand=function(e){return e.isHeaderCollapsed&&!this.props.isHeaderCollapsed},o.scrollToTop=function(){var e=this.partsRef;e&&(0,s.scrollToPosition)(e,0)},o.scrollToBottom=function(){var e=this.partsRef;e&&(0,s.scrollToBottom)(e)},o.getPartsStyle=function(){return{bottom:this.props.composerHeight}},o.getPartsRef=function(){return this.partsRef},o.renderParts=function(){var e=this.props,t=e.appName,r=e.conversation,n=e.frameWindow,o=e.composerHeight,a=e.onRetry,i=e.onReactionSelect,s=e.onArticleCardClick,l=this.state,c=l.partsHeight,u=l.scrolledToBottom,d=c-o;return p.default.createElement(f.default,{appName:t,conversation:r,maxHeight:d,scrolledToBottom:u,frameWindow:n,setPartRef:this.setUnreadPartRef,onRetry:a,onReactionSelect:i,onArticleCardClick:s})},o.renderQuickReplies=function(){return p.default.createElement("div",{className:"intercom-conversation-body-quick-replies"},p.default.createElement(a.default,{conversation:this.props.conversation,isBorderless:!1}))},o.renderIntercomLink=function(){return p.default.createElement(c.default,{intercomLinkSolution:this.props.conversation.intercomLinkSolution})},o.renderComposerSuggestions=function(){var e=this.props,t=e.onComposerSuggestionClicked,r=e.composerSuggestions;return p.default.createElement(u.default,{composerSuggestions:r,onClick:t})},o.renderBottomGroup=function(){var e=this.props,t=e.isIntercomLinkEnabled,r=e.shouldShowComposerSuggestions,n=t&&!r;return t||r?p.default.createElement(l.CSSTransition,{classNames:"intercom-conversation-body-bottom-group",timeout:{enter:400,exit:100}},p.default.createElement(p.default.Fragment,null,n&&this.renderIntercomLink(),r&&this.renderComposerSuggestions())):null},o.render=function(){var e=this.props.conversation,t=e.isFetching,r=e.isUpdating,n=t&&!r;return p.default.createElement("div",{className:"intercom-conversation-body",onScroll:this.handleScroll,onWheel:this.handleWheel},p.default.createElement("div",{className:"intercom-conversation-body-parts",ref:this.setPartsRef,style:this.getPartsStyle(),tabIndex:"0","aria-live":"assertive","aria-atomic":"false",role:"alert"},n?p.default.createElement(i.default,null):this.renderParts(),this.renderQuickReplies(),this.renderBottomGroup()))},r}(p.Component);m(t.default=h,"defaultProps",{composerHeight:0}),h.contextTypes={addMetric:n.default.func}},1354:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=o(r(1059)),s=o(r(1355)),n=o(r(22));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var o=n.prototype;return o.componentDidMount=function(){this.context.addMetric("received","composer_suggestions","messenger","",this.props.composerSuggestions)},o.render=function(){var t=this,e=this.props.composerSuggestions,r=e.prompt,n=e.suggestions;return a.default.createElement("div",{className:"intercom-composer-suggestions-container"},a.default.createElement("div",{className:"intercom-conversation-body-bottom-group"},a.default.createElement("h3",{className:"intercom-composer-suggestions-title"},a.default.createElement(i.default,{autoPlay:!1,blocks:r})),a.default.createElement("div",{className:"intercom-composer-suggestions"},n.map(function(e){return a.default.createElement(s.default,{key:e.uuid,suggestion:e,onClick:t.props.onClick})}))))},n}(a.Component);(t.default=l).contextTypes={addMetric:n.default.func}},1355:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1));function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(a){var e,t;function r(e){var t,r,n,o;return t=a.call(this,e)||this,r=i(t),o=function(){var e=t.props;(0,e.onClick)(e.suggestion)},(n="handleSuggestionClick")in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,t.handleSuggestionClick=t.handleSuggestionClick.bind(i(t)),t}return t=a,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r.prototype.render=function(){var t=this,e=this.props.suggestion;return n.default.createElement("div",{className:"intercom-composer-suggestion",onClick:t.handleSuggestionClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleSuggestionClick(e)},role:"button",tabIndex:"0"},e.text)},r}(n.Component);t.default=o},1356:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),m=n(r(1116)),s=n(r(1071)),l=r(59);function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var o=n.prototype;return o.componentWillUnmount=function(){this.props.onHeightChange(0)},o.shouldShowReactionPicker=function(){var e=(0,l.getLastAdminPart)(this.props.conversation);return e&&e.reactionsReply&&"text"!==e.replyType},o.renderComposer=function(){var e=this.props,t=e.appWindow,r=e.frameWindow,n=e.conversation,o=e.showEmojiPicker,a=e.showGifPicker,i=e.onHeightChange,s=e.onEmojiPickerToggle,l=e.onGifPickerToggle,c=e.onHeaderCollapse,u=e.headerHeight,d=e.shouldShowUpfrontEmailComposer,p=e.shouldShowComposerSuggestions;return f.default.createElement(m.default,{conversation:n,appWindow:t,frameWindow:r,showEmojiPicker:o,showGifPicker:a,onEmojiPickerToggle:s,onGifPickerToggle:l,onHeightChange:i,onHeaderCollapse:c,shouldShowComposerSuggestions:p,shouldShowUpfrontEmailComposer:d,headerHeight:u})},o.renderReactionPicker=function(){var e=this.props,t=e.conversation,r=e.onReactionSelect,n=e.onHeightChange,o=(0,l.getLastAdminPart)(t).reactionsReply,a=o.reactionSet,i=o.reactionIndex;return f.default.createElement(s.default,{reactionSet:a,reactionIndex:i,onReactionSelect:r,onHeightChange:n})},o.render=function(){return f.default.createElement("div",{className:"intercom-conversation-footer"},this.shouldShowReactionPicker()?this.renderReactionPicker():this.renderComposer())},n}(f.Component);t.default=o},1357:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MessengerOptions=void 0;var n,o=r(1),a=(n=r(22))&&n.__esModule?n:{default:n};function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(){function e(){i(this,"focusComposer",function(){})}return e.prototype.subscribe=function(e,t){this[e]=t},e}();t.MessengerOptions=s;var l=function(o){var e,t;function r(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return i(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e=o.call.apply(o,[this].concat(r))||this),"messengerOptions",new s),e}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.getChildContext=function(){return{messengerOptions:this.messengerOptions}},n.render=function(){return this.props.children},r}(o.Component);(t.default=l).childContextTypes={messengerOptions:a.default.object},l.propTypes={children:a.default.node.isRequired}},1358:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFilesFromDropEvent=t.getFilesFromPasteEvent=void 0;t.getFilesFromPasteEvent=function(e){var t=(e.clipboardData||e.originalEvent.clipboardData).items,r=[],n=s(t);for(var o in t){var a=t[o];if("file"===a.kind&&!n){var i=a.getAsFile();r.push(i)}}return r};t.getFilesFromDropEvent=function(e){return e.dataTransfer.files};var s=function(e){if(e.length<=1)return!1;var t=[];for(var r in e)t.push(e[r].kind);return 0<=t.indexOf("string")&&0<=t.indexOf("file")}},1359:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerFromSuggestion=function(l,c,u){void 0===u&&(u=!1);return s=regeneratorRuntime.mark(function e(t,r){var n,o,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r(),o=n.session,a=(0,p.generateUUID)(),i={clientId:a,body:(0,f.createBlocksForText)(c.text),createdAt:new Date,composerSuggestionItem:c},t(v(c)),t((0,d.createConversationRequest)(i,u)),e.next=9,l.startConversationFromSuggestion(o,{suggestionUuid:c.uuid,clientId:a});case 9:s=e.sent,t((0,d.createConversationSuccess)(s,null,null,Date.now(),!0)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),t((0,d.createConversationFailure)(null)),h("Couldnt start conversation from suggestion due to e="+e.t0);case 17:case"end":return e.stop()}},e,null,[[0,13]])}),r=function(){var e=this,i=arguments;return new Promise(function(t,r){var n=s.apply(e,i);function o(e){m(n,t,r,o,a,"next",e)}function a(e){m(n,t,r,o,a,"throw",e)}o(void 0)})},function(e,t){return r.apply(this,arguments)};var s,r};var n,d=r(183),p=r(421),f=r(724);function m(e,t,r,n,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}var h=(0,((n=r(433))&&n.__esModule?n:{default:n}).default)("intercom.actions.inbound-triggers");function v(e){switch(e.preAction){case"close-composer":return(0,d.setNewConversationComposerState)({visible:!1});default:throw"Invalid PRE ACTION type for suggestion="+e.preAction}}},1360:function(e,t,r){e.exports=r.p+"images/background-1.4448c751.png"},1361:function(e,t,r){e.exports=r.p+"images/background-2.b3918e5d.png"},1362:function(e,t,r){e.exports=r.p+"images/background-3.55dcc6d3.png"},1363:function(e,t,r){e.exports=r.p+"images/background-4.735d4536.png"},1364:function(e,t,r){e.exports=r.p+"images/background-5.48123ed3.png"},1365:function(e,t,r){e.exports=r.p+"images/background-6.3414a8a7.png"},1366:function(e,t,r){e.exports=r.p+"images/background-7.ed5e0189.png"},1367:function(e,t,r){e.exports=r.p+"images/background-8.436704f5.png"},772:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SheetProxy=t.APP_SHEET_FRAME_NAME=void 0;var n=r(424),o=r(461);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.APP_SHEET_FRAME_NAME="intercom-messenger-sheet";var i=function(){function e(){var r=this;a(this,"iframe",void 0),a(this,"sendMessageForHtmlLoad",function(){var e=(0,n.createMessage)(o.HTML_LOADED,void 0,n.SEND_DATA_TO_MESSENGER);r.sendMessageToMessenger(e)}),a(this,"handleIframeLoad",function(){var e=(0,n.createMessage)(o.SHEET_LOADED,void 0,n.SEND_DATA_TO_MESSENGER);r.sendMessageToMessenger(e)}),a(this,"handleMessage",function(e){var t=(e.data||{}).intercomSheet;if(!t||!t.meta)return null;switch(t.meta.proxy){case n.SEND_DATA_TO_MESSENGER:r.sendMessageToMessenger(e.data);break;case n.SEND_DATA_TO_SHEET:r.sendMessageToSheet(e.data)}}),this.sendMessageForHtmlLoad(),this.findIframe(),this.setupProxyListeners(),this.setupIframeListeners()}var t=e.prototype;return t.setupProxyListeners=function(){window.addEventListener("message",this.handleMessage,!1)},t.setupIframeListeners=function(){if(!this.iframe)return null;this.iframe.addEventListener("load",this.handleIframeLoad,!1)},t.findIframe=function(){if(this.iframe=document.querySelector("#intercom-messenger-sheet"),!this.iframe)throw new Error("SheetProxy: The iframe node does not exist")},t.sendMessageToMessenger=function(e){window.parent.postMessage(e,"*")},t.sendMessageToSheet=function(e){this.iframe.contentWindow.postMessage(e,"*")},e}();t.SheetProxy=i},859:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=void 0;t.clamp=function(e,t,r){return Math.min(r,Math.max(e,t))}},864:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=n(r(865)),s=n(r(867)),l=r(43),c=r(48),u=r(772),d=n(r(727)),p=r(730),f=r(186);function n(e){return e&&e.__esModule?e:{default:e}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(o){var e,t;function r(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return h(m(t=o.call.apply(o,[this].concat(r))||this),"node",void 0),h(m(t),"form",void 0),h(m(t),"focusTrap",null),h(m(t),"state",{isSubmitted:!1}),h(m(t),"handleEscape",function(e){(0,c.isEscapeKey)(e)&&t.handleCloseSheet()}),h(m(t),"handleCloseSheet",function(){t.props.closeSheet();var e=(0,f.getSheetOpener)();e&&(e(),(0,f.setSheetOpener)(null))}),h(m(t),"setFormRef",function(e){t.form=e}),h(m(t),"submitForm",function(){if(!t.form)return null;t.form.submit(),t.setState({isSubmitted:!0})}),h(m(t),"handleIframeLoad",function(){t.props.setProxyLoadedStatus(!0)}),t}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){if((0,c.addEventListener)(this.props.frameWindow,"keydown",this.handleEscape),this.node){var e=function(){return(0,p.launcherFirstFocusableElement)()};this.focusTrap=new d.default({document:this.node,firstElement:e,lastElement:e})}},n.componentDidUpdate=function(){this.shouldSubmitForm()&&this.submitForm()},n.componentWillUnmount=function(){(0,c.removeEventListener)(this.props.frameWindow,"keydown",this.handleEscape),this.focusTrap&&this.focusTrap.restore()},n.shouldSubmitForm=function(){var e=this.props,t=e.isSheetsDataLoaded,r=e.isProxyLoaded;return!this.state.isSubmitted&&t&&r},n.renderSheetForm=function(){var e=this.props,t=e.url,r=e.sheetsData;return r?a.default.createElement("form",{ref:this.setFormRef,className:"intercom-messenger-sheet-container-form",action:t,method:"post",target:u.APP_SHEET_FRAME_NAME},a.default.createElement("input",{type:"hidden",name:"intercom_data",value:r,readOnly:!0})):null},n.render=function(){var t=this,e=this.props.sheetTitle;return a.default.createElement("div",{className:"intercom-messenger-sheet",ref:function(e){return t.node=e}},a.default.createElement(i.default,{onClose:this.handleCloseSheet,sheetTitle:e}),a.default.createElement(s.default,{isNavigating:this.props.isNavigating,onFrameLoad:this.handleIframeLoad,startNavigation:this.props.startNavigation,receiveSheetMessage:this.props.receiveSheetMessage,setProxyLoadedStatus:this.props.setProxyLoadedStatus,transitionTimeout:this.props.transitionTimeout}),this.renderSheetForm(),a.default.createElement("button",{className:"intercom-visually-hidden","aria-label":(0,l.translate)("close"),onClick:this.handleCloseSheet,tabIndex:"0"}))},r}(a.PureComponent);t.default=o},865:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapStateToProps=void 0;var n,o=r(42),a=(n=r(866))&&n.__esModule?n:{default:n};var i=function(e){return{backgroundImage:e.app.backgroundImage,tabNavigation:e.accessibility.tabNavigation}};t.mapStateToProps=i;var s=(0,o.connect)(i)(a.default);t.default=s},866:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=n(r(14)),s=n(r(857)),l=r(43);function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var o=n.prototype;return o.getClassNames=function(){var e,t=this.props.backgroundImage;return(0,i.default)("intercom-messenger-sheet-header",((e={})["intercom-messenger-header-"+(t||"")]=!!t,e))},o.render=function(){var e=this.props,t=e.sheetTitle,r=e.onClose;return a.default.createElement("div",{className:this.getClassNames()},a.default.createElement("div",{className:"intercom-messenger-sheet-header-title"},t),a.default.createElement("div",{className:"intercom-messenger-sheet-header-buttons-close-button",onClick:r,"aria-label":(0,l.translate)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&r(e)},role:"button",tabIndex:"0"},a.default.createElement("div",{className:"intercom-messenger-sheet-header-buttons-close-button-body"},a.default.createElement(s.default,null))))},n}(a.PureComponent);t.default=o},867:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=(n=r(868))&&n.__esModule?n:{default:n};function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=r(185),o=function(o){var e,t;function r(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(s(e=o.call.apply(o,[this].concat(r))||this),"frameNode",void 0),l(s(e),"sheetProxyNode",void 0),l(s(e),"state",{loadFrame:!1}),e}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){var e=this;setTimeout(function(){e.setState({loadFrame:!0}),e.setupSheetFrame(),e.sheetProxyNode&&e.sheetProxyNode.focus()},this.props.transitionTimeout)},n.setupSheetFrame=function(){if(this.state.loadFrame){var e=this.props,t=e.startNavigation,r=e.receiveSheetMessage;t(),this.frameNode&&(this.frameNode.ownerDocument.defaultView.addEventListener("message",r,!1),this.frameNode&&this.frameNode.setAttribute("allow","microphone *; camera *; autoplay *"))}},n.componentWillUnmount=function(){(0,this.props.setProxyLoadedStatus)(!1),this.frameNode&&this.frameNode.ownerDocument.defaultView.removeEventListener("message",this.props.receiveSheetMessage)},n.render=function(){var t=this,e=this.props,r=e.onFrameLoad,n=e.isNavigating;return a.default.createElement("div",{className:"intercom-messenger-sheet-proxy",tabIndex:"0",ref:function(e){return t.sheetProxyNode=e}},a.default.createElement(i.default,{isLoading:n}),this.state.loadFrame?a.default.createElement("iframe",{ref:function(e){return t.frameNode=e},name:"intercom-messenger-sheet-proxy",className:"intercom-messenger-sheet-proxy-frame",sandbox:"allow-scripts allow-forms allow-same-origin allow-popups",src:c.sheets_proxy_path,onLoad:r,allowFullScreen:!0,title:"Messenger app"}):null)},r}(a.Component);t.default=o},868:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),i=r(859);function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(o){var e,t;function r(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(s(e=o.call.apply(o,[this].concat(r))||this),"incrementInterval",void 0),l(s(e),"state",{percent:0,opacity:1,withTransition:!1}),e}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){this.props.isLoading&&this.startTrickleWork()},n.componentDidUpdate=function(e){var t=e.isLoading;this.props.isLoading&&!t&&(this.resetBar(),this.startTrickleWork()),t&&!this.props.isLoading&&this.finishLoading()},n.componentWillUnmount=function(){this.clearInterval()},n.startTrickleWork=function(){var r=this,e=this.props.trickleSpeed;this.clearInterval(),this.incrementInterval=setInterval(function(){var e,t;r.setState({percent:(e=r.state.percent,"number"!=typeof t&&(t=0<=e&&e<.2?.1:.2<=e&&e<.5?.04:.5<=e&&e<.8?.02:.8<=e&&e<.99?.005:0),e=(0,i.clamp)(e+t,0,.994)),withTransition:!0})},e)},n.finishLoading=function(){var e=this,t=this.props.speed;this.setState({percent:1,withTransition:!0}),setTimeout(function(){e.setState({opacity:0})},t)},n.resetBar=function(){this.setState({percent:0,opacity:1,withTransition:!1})},n.clearInterval=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){this.incrementInterval&&clearInterval(this.incrementInterval)}),n.getProgressBarStyle=function(){var e,t=this.state,r=t.percent,n=t.opacity,o=t.withTransition,a=this.props,i=a.speed,s=a.easing;return{transform:"translate3d("+(e=r,(100*(-1+e)).toFixed(2))+"%,0,0)",transition:o?"all "+i+"ms "+s:"none",opacity:n}},n.render=function(){return a.default.createElement("div",{style:this.getProgressBarStyle(),className:"intercom-progress-bar"})},r}(a.PureComponent);l(t.default=n,"defaultProps",{trickleSpeed:200,speed:200,easing:"linear",isLoading:!1})},869:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}}(r(1)),n=o(r(22)),d=r(26),i=r(43),s=o(r(870)),l=o(r(14));function o(e){return e&&e.__esModule?e:{default:e}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(n){var e,t;function r(){for(var u,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p(c(u=n.call.apply(n,[this].concat(t))||this),"handleClick",function(){u.addMetric("clicked")}),p(c(u),"getLinkUrl",function(){var e=u.props,t=e.userId,r=e.appName,n=e.intercomLinkSolution,o=e.appId,a=e.currentView,i=n||"",s="utm_content=4+";a&&(s+=a+"+"),s+=e.isDeveloperWorkspace?"developer-workspace&":"we-run-on-intercom&";var l=(0,d.isMobileBrowser)()?"mobile-web":"desktop-web",c=encodeURI(window.location.origin+window.location.pathname);return"https://www.intercom.com/intercom-link?user_id="+(t||"")+"&powered_by_app_id="+(o||"")+"&company="+encodeURIComponent(r)+"&solution="+i+"&"+s+"utm_source="+l+"&utm_medium=messenger&utm_campaign=intercom-link&utm_referrer="+c}),u}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.addMetric=function(e){var t=this.props,r=t.currentView,n=t.isDeveloperWorkspace?"developer_workspace":"we_run_on_intercom";this.context.addMetric(e,n,"messenger",r,{},"m4_metric")},o.getClassName=function(){return(0,l.default)({"intercom-link-container":!0,"intercom-under-construction-banner":this.props.isDeveloperWorkspace})},o.getLinkText=function(){return this.props.isDeveloperWorkspace?"Development Workspace":(0,i.translate)("we_run_on_intercom")},o.render=function(){return a.default.createElement("div",{className:this.getClassName()},a.default.createElement("div",{className:"intercom-conversation-body-bottom-group"},a.default.createElement("div",{className:"intercom-link"},a.default.createElement("a",{href:this.getLinkUrl(),onClick:this.handleClick,className:"intercom-link-target",target:"_blank",tabIndex:"0"},a.default.createElement(s.default,null),a.default.createElement("span",{className:"intercom-link-text"},this.getLinkText())))))},r}(a.Component);p(t.default=u,"defaultProps",{currentView:"conversation"}),p(u,"contextTypes",{addMetric:n.default.func})},870:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(1))&&n.__esModule?n:{default:n};var a=function(){return o.default.createElement("svg",{className:"intercom-link-container-icon",viewBox:"0 0 16 16"},o.default.createElement("g",null,o.default.createElement("path",{d:"M13.9 8.8C13.9 9.1 13.6 9.3 13.3 9.3 13 9.3 12.8 9.1 12.8 8.8L12.8 4C12.8 3.7 13 3.5 13.3 3.5 13.6 3.5 13.9 3.7 13.9 4L13.9 8.8 13.9 8.8ZM13.7 12.1C13.6 12.2 11.6 13.9 8 13.9 4.4 13.9 2.4 12.2 2.3 12.1 2.1 11.9 2.1 11.6 2.3 11.4 2.5 11.2 2.8 11.1 3 11.3 3 11.4 4.8 12.8 8 12.8 11.2 12.8 13 11.3 13 11.3 13.2 11.1 13.5 11.2 13.7 11.4 13.9 11.6 13.9 11.9 13.7 12.1L13.7 12.1ZM2.1 4C2.1 3.7 2.4 3.5 2.7 3.5 3 3.5 3.2 3.7 3.2 4L3.2 8.8C3.2 9.1 3 9.3 2.7 9.3 2.4 9.3 2.1 9.1 2.1 8.8L2.1 4 2.1 4ZM4.8 2.9C4.8 2.6 5 2.4 5.3 2.4 5.6 2.4 5.9 2.6 5.9 2.9L5.9 10.1C5.9 10.4 5.6 10.6 5.3 10.6 5 10.6 4.8 10.4 4.8 10.1L4.8 2.9 4.8 2.9ZM7.5 2.7C7.5 2.4 7.7 2.1 8 2.1 8.3 2.1 8.5 2.4 8.5 2.7L8.5 10.4C8.5 10.7 8.3 10.9 8 10.9 7.7 10.9 7.5 10.7 7.5 10.4L7.5 2.7 7.5 2.7ZM10.1 2.9C10.1 2.6 10.4 2.4 10.7 2.4 11 2.4 11.2 2.6 11.2 2.9L11.2 10.1C11.2 10.4 11 10.6 10.7 10.6 10.4 10.6 10.1 10.4 10.1 10.1L10.1 2.9 10.1 2.9ZM14 0L2 0C0.9 0 0 0.9 0 2L0 14C0 15.1 0.9 16 2 16L14 16C15.1 16 16 15.1 16 14L16 2C16 0.9 15.1 0 14 0L14 0Z"})))};t.default=a},875:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapStateToProps=void 0;var n,s=r(133),o=(n=r(1291))&&n.__esModule?n:{default:n},a=r(42),l=r(734);var c=r(729),i=function(e){var t=e.app,r=t.isBooting,n=t.backgroundImage,o=t.isIntercomLinkEnabled,a=(0,s.shouldShowUpfrontEmailSelector)(e),i=e.app.upfrontEmailCollection.upfrontEmailCollectorShowing;return{isLauncherEnabled:c(e),isBooting:r,currentView:(0,s.currentViewSelector)(e),backgroundImage:n,isIntercomLinkEnabled:o,shouldShowUpfrontEmailComposer:a,upfrontEmailCollectorShowing:i,isSheetOpen:(0,l.isOpenSelector)(e)}};t.mapStateToProps=i;var u=(0,a.connect)(i)(o.default);t.default=u}}]);